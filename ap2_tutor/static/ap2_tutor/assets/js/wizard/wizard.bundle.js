(()=>{"use strict";var e={300:(e,t,n)=>{var a=n(803);const i=function(){const e={maxAlerts:3,defaultDuration:{error:1e4,warning:6e3,success:4e3,info:5e3},icons:{error:'<i class="bi bi-x-octagon-fill me-2 fs-5"></i>',warning:'<i class="bi bi-exclamation-triangle-fill me-2 fs-5 text-warning"></i>',success:'<i class="bi bi-check-circle-fill me-2 fs-5 text-success"></i>',info:'<i class="bi bi-info-circle-fill me-2 fs-5 text-primary"></i>'},styles:{error:"background-color: #f8d7da; border-color: #f5c2c7; color: #842029;",warning:"background-color: #fff3cd; border-color: #ffecb5; color: #664d03;",success:"background-color: #d1e7dd; border-color: #badbcc; color: #0f5132;",info:"background-color: #cfe2ff; border-color: #b6d4fe; color: #084298;"},positions:{desktop:{default:"top-0 start-50 translate-middle-x",top:"top-0 start-50 translate-middle-x",bottom:"bottom-0 start-50 translate-middle-x","top-left":"top-0 start-0","top-right":"top-0 end-0","bottom-left":"bottom-0 start-0","bottom-right":"bottom-0 end-0",center:"top-50 start-50 translate-middle"},mobile:{default:"top-0 start-0",top:"top-0 start-0",bottom:"bottom-0 start-0","top-left":"top-0 start-0","top-right":"top-0 end-0","bottom-left":"bottom-0 start-0","bottom-right":"bottom-0 end-0"}}};let t=new Set,n=new Map;function a(t="default"){if(n.has(t))return n.get(t);const a=document.createElement("div"),i=window.innerWidth>768?e.positions.desktop:e.positions.mobile,o=i[t]||i.default;return a.className=`alert-container position-fixed p-3 ${o}`,a.style.zIndex="9999",a.style.maxWidth="400px",a.style.overflowY="auto",a.style.maxHeight="100vh",document.body.appendChild(a),n.set(t,a),a}function i(n,i="info",s={}){const l=`${i}-${n}-${s.position||"default"}`;if(t.has(l))return;const{duration:d=e.defaultDuration[i]||3e3,dismissible:c=!0,scrollTo:u=!1,highlightSelector:m=null,position:p="default"}=s,h=function(t,n,a){const i=document.createElement("div");return i.className=`alert alert-${n} alert-dismissible fade show mb-2 shadow`,i.style.cssText=`\n            width: 100%;\n            transition: opacity 0.5s ease;\n            ${e.styles[n]||""}\n            border-left: 4px solid ${o(n)};\n            opacity: 1;\n        `,i.innerHTML=`\n            <div class="d-flex align-items-center">\n                ${e.icons[n]||""}\n                <div class="flex-grow-1">${t}</div>\n                ${a?'<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>':""}\n            </div>\n        `,i}(n,i,c);!function(e,t="default"){const n=a(t);n.prepend(e)}(h,p),t.add(l),function(e,t,n,a){let i;n&&(i=setTimeout(()=>{r(e,t)},n));if(a){const n=e.querySelector(".btn-close");n?.addEventListener("click",()=>{clearTimeout(i),r(e,t)})}}(h,l,d,c),function(e,t,n){t&&setTimeout(()=>{e.scrollIntoView({behavior:"smooth",block:"nearest"})},100);n&&(a=n,document.querySelectorAll(a).forEach(e=>{e.classList.add("is-invalid"),setTimeout(()=>{e.scrollIntoView({behavior:"smooth",block:"nearest"})},300),setTimeout(()=>{e.classList.remove("is-invalid")},5e3)}));var a}(h,u,m)}function o(e){return{error:"#dc3545",warning:"#ffc107",success:"#198754",info:"#0dcaf0"}[e]||"#6c757d"}function r(e,a){e.style.opacity="0",setTimeout(()=>{e.remove(),t.delete(a);const i=e.parentElement;i&&0===i.children.length&&(i.remove(),n.delete(Array.from(n.entries()).find(([e,t])=>t===i)?.[0]))},500)}function s(){n.forEach(e=>{e.remove()}),n.clear(),t.clear()}return window.addEventListener("resize",function(){n.forEach((t,n)=>{const a=window.innerWidth>768?e.positions.desktop:e.positions.mobile,i=a[n]||a.default;t.className=t.className.replace(/(top|bottom|start|end|translate)-\S+/g,""),t.classList.add(...i.split(" "))})}),{show:i,showWizardErrors:function(e){if(s(),e.length>0){i(e[0].message,"error",{duration:1e4,scrollTo:!0,highlightSelector:e[0].selector});for(let t=1;t<e.length;t++)i(e[t].message,"error",{duration:8e3,highlightSelector:e[t].selector})}},confirm:function(n,i={}){return new Promise(r=>{const s=`confirm-${n}`;if(t.has(s))return;const{confirmText:l="Confirm",cancelText:d="Cancel",position:c="center",type:u="warning"}=i,m=document.createElement("div");m.className=`alert alert-${u} alert-dismissible fade show mb-2 shadow`,m.style.cssText=`\n            width: 100%;\n            transition: opacity 0.5s ease;\n            ${e.styles[u]||""}\n            border-left: 4px solid ${o(u)};\n            opacity: 1;\n        `,m.innerHTML=`\n            <div class="d-flex flex-column">\n                <div class="d-flex align-items-center mb-3">\n                    ${e.icons[u]||""}\n                    <div class="flex-grow-1">${n}</div>\n                </div>\n                <div class="d-flex justify-content-end gap-2">\n                    <button class="btn btn-sm btn-outline-secondary cancel-btn">${d}</button>\n                    <button class="btn btn-sm btn-${u} confirm-btn">${l}</button>\n                </div>\n            </div>\n        `;a(c).prepend(m),t.add(s);const p=m.querySelector(".confirm-btn"),h=m.querySelector(".cancel-btn"),f=()=>{m.style.opacity="0",setTimeout(()=>{m.remove(),t.delete(s)},500)};p.addEventListener("click",()=>{f(),r(!0)}),h.addEventListener("click",()=>{f(),r(!1)})})},clearAll:s}}(),o=i.show,r=i.showWizardErrors,s=(i.clearAll,i.confirm);new class{constructor(e={}){this.options={modalId:"uploadProgressModal",progressBarId:"uploadProgressBar",progressTextId:"uploadProgressText",cancelButtonId:"cancelUploadBtn",titleId:"uploadModalTitle",...e},this.modalElement=document.getElementById(this.options.modalId),this.progressBar=document.getElementById(this.options.progressBarId),this.progressText=document.getElementById(this.options.progressTextId),this.cancelButton=document.getElementById(this.options.cancelButtonId),this.titleElement=document.getElementById(this.options.titleId),this.modalElement?(this.modal=new bootstrap.Modal(this.modalElement),this.isVisible=!1,this.currentXHR=null,this.init()):console.error("Upload progress modal element not found!")}init(){this.cancelButton&&this.cancelButton.addEventListener("click",()=>{this.cancelUpload()}),this.modalElement.addEventListener("hidden.bs.modal",()=>{this.isVisible=!1,this.currentXHR=null})}show(e="Uploading Files"){this.titleElement&&(this.titleElement.textContent=e),this.setProgress(0,"Preparing upload... 0%"),this.modal.show(),this.isVisible=!0}hide(){this.isVisible&&(this.modal.hide(),this.isVisible=!1)}setProgress(e,t){this.progressBar&&(this.progressBar.style.width=`${e}%`,this.progressBar.setAttribute("aria-valuenow",e)),this.progressText&&(this.progressText.textContent=t)}updateProgress(e){if(e.lengthComputable){const t=Math.round(e.loaded/e.total*100),n=`Uploading: ${t}% complete (${this.formatFileSize(e.loaded)} / ${this.formatFileSize(e.total)})`;this.setProgress(t,n)}}cancelUpload(){this.currentXHR&&this.currentXHR.abort(),this.hide()}setCurrentXHR(e){this.currentXHR=e}formatFileSize(e){if(0===e)return"0 Byte";const t=parseInt(Math.floor(Math.log(e)/Math.log(1024)),10);return`${(e/Math.pow(1024,t)).toFixed(1)} ${["Bytes","KB","MB","GB"][t]}`}async uploadFiles(e,t,n={}){const{method:a="POST",headers:i={},timeout:o=15e3,onSuccess:r=null,onError:s=null,onProgress:l=null,title:d="Uploading Files"}=n;return new Promise((n,c)=>{const u=new XMLHttpRequest;this.setCurrentXHR(u),this.show(d),u.open(a,t,!0),Object.entries(i).forEach(([e,t])=>{u.setRequestHeader(e,t)}),u.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.upload.onprogress=e=>{this.updateProgress(e),l&&l(e)},u.onload=()=>{this.hide();try{const e=u.responseText?JSON.parse(u.responseText):{};if(u.status>=200&&u.status<300)r&&r(e),n(e);else{const t=new Error(e.error||e.message||`HTTP error: ${u.status}`);t.response=e,t.status=u.status,s&&s(t),c(t)}}catch(e){const t=new Error(u.status>=400?`HTTP error: ${u.status}`:"Invalid server response");t.status=u.status,s&&s(t),c(t)}},u.onerror=()=>{this.hide();const e=new Error("Network error during upload");s&&s(e),c(e)},u.onabort=()=>{this.hide();const e=new Error("Upload cancelled");s&&s(e),c(e)},u.timeout=o,u.ontimeout=()=>{this.hide();const e=new Error("Request timed out");s&&s(e),c(e)},u.send(e)})}};const l=new class{constructor(){this.modalElement=document.getElementById("uploadProgressModal"),this.progressBar=document.getElementById("uploadProgressBar"),this.progressText=document.getElementById("uploadProgressText"),this.cancelButton=document.getElementById("cancelUploadBtn"),this.isVisible=!1,this.currentXHR=null,this.modalElement&&(this.modal=new bootstrap.Modal(this.modalElement),this.modalElement.addEventListener("hidden.bs.modal",()=>{this.isVisible=!1,this.currentXHR=null}))}show(e="Uploading Files"){if(!this.modal)return;this.isVisible=!0;const t=this.modalElement.querySelector(".modal-title");t&&e&&(t.textContent=e),this.resetProgress(),this.modal.show()}hide(){this.modal&&this.isVisible&&(this.modal.hide(),this.isVisible=!1,this.currentXHR=null)}resetProgress(){this.progressBar&&(this.progressBar.style.width="0%",this.progressBar.setAttribute("aria-valuenow",0),this.progressBar.classList.remove("bg-success","bg-danger"),this.progressBar.classList.add("bg-primary")),this.progressText&&(this.progressText.textContent="Preparing upload... 0%",this.progressText.classList.remove("text-success","text-danger"))}updateProgress(e){if(this.isVisible&&e.lengthComputable&&this.progressBar&&this.progressText){const t=Math.round(e.loaded/e.total*100);this.progressBar.style.width=`${t}%`,this.progressBar.setAttribute("aria-valuenow",t),this.progressText.textContent=`Uploading: ${t}% complete (${this.formatFileSize(e.loaded)} / ${this.formatFileSize(e.total)})`}}markSuccess(e="Upload completed successfully!"){this.progressBar&&(this.progressBar.classList.remove("bg-primary"),this.progressBar.classList.add("bg-success")),this.progressText&&(this.progressText.textContent=e,this.progressText.classList.add("text-success")),setTimeout(()=>this.hide(),1500)}markError(e="Upload failed!"){this.progressBar&&(this.progressBar.classList.remove("bg-primary"),this.progressBar.classList.add("bg-danger")),this.progressText&&(this.progressText.textContent=e,this.progressText.classList.add("text-danger"))}formatFileSize(e){if(0===e)return"0 Byte";const t=parseInt(Math.floor(Math.log(e)/Math.log(1024)),10);return`${(e/Math.pow(1024,t)).toFixed(1)} ${["Bytes","KB","MB","GB"][t]}`}setupCancelButton(e){this.currentXHR=e,this.cancelButton&&(this.cancelButton.replaceWith(this.cancelButton.cloneNode(!0)),this.cancelButton=document.getElementById("cancelUploadBtn"),this.cancelButton.onclick=()=>{this.currentXHR&&this.currentXHR.abort(),this.hide()})}},d=parseInt(document.getElementById("maxEntries").value),c=document.getElementById("skill-card-template"),u=parseInt(document.getElementById("applicantUId").value),m=document.getElementById("skills-container"),p=document.getElementById("btnAddSkill"),h=["mp4"],f=["pdf","doc","docx","png","jpg","jpeg"],g=["png","jpg","jpeg"];let y=[],b=[],v=[],E=[];const k={video:{existed:[],uploaded:[],changed:[],removed:[]},certificate:{existed:[],uploaded:[],changed:[],removed:[]},thumbnail:{existed:[],uploaded:[],changed:[],removed:[]},skills:{new:[],existed:[],removed:[]}};async function w(){if(!u)return void console.error("No applicantUId found!");const e=`/tutor/get-existed-skills/?applicantUId=${u}`;try{const t=await fetch(e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const n=await t.json();for(;m.firstChild;)m.removeChild(m.firstChild);n.existed_uSkill_list&&Array.isArray(n.existed_uSkill_list)?n.existed_uSkill_list.forEach(e=>{e&&N("skills","existed",e.uSkillId),e.video&&N("video","existed",e.uSkillId),e.certificate&&N("certificate","existed",e.uSkillId),e.thumbnail&&N("thumbnail","existed",e.uSkillId),function(e,t,n,a,i,o){const r=Number(e),s=I(e.toString(),{isExisting:!0,skillId:t,levelId:n});if(!s)return;m.appendChild(s);const l=s.querySelector('[name^="skill_video"]'),d=s.querySelector('[name^="certificate"]'),c=s.querySelector('[name^="thumbnail"]'),u=s.querySelector(".label_skill_video"),p=s.querySelector(".label_skill_certificate"),h=s.querySelector(".label_skill_thumbnail");a&&l&&u&&(x("video",l,u,s),N("video","existed",r));i&&d&&p&&(x("certificate",d,p,s),N("certificate","existed",r));o&&c&&h&&(x("thumbnail",c,h,s),N("thumbnail","existed",r));D(s,e.toString()),F(s,r),M()}(e.uSkillId,e.skill,e.level,e.video,e.certificate,e.thumbnail)}):console.error("Invalid data format:",n),0===n.existed_uSkill_list.length&&T()}catch(e){console.error("Error fetching skills:",e)}}function validate_skills(){const e=document.getElementById("skills-container").querySelectorAll(".skill-card");let t=!0;if(y=[],b=[],v=[],E=[],e.length>d)return o(`You can add up to ${d} skills only.`,"error"),!1;if(0==e.length)return o("Please add at least one skill to proceed.","error"),!1;const n=new Map;return e.forEach(e=>{const t=e.querySelector('[name^="skill"]');if(t?.value){const e=n.get(t.value)||0;n.set(t.value,e+1)}}),e.forEach((a,i)=>{const r=a.dataset.cardId,s=a.querySelector('[name^="skill"]'),l=a.querySelector('[name^="level"]'),d=a.querySelector('[name^="skill_video"]'),c=a.querySelector('[name^="certificate"]'),u=a.querySelector('[name^="thumbnail"]'),m=i+1,p=s?.options[s.selectedIndex]?.text||"Skill";_(a);let w=!0;s?.value?n.get(s.value)>1&&(S(s,"This skill is already selected"),E.push(`Row ${m} (${p})`),w=!1):(S(s,"Please select a skill"),y.push(`Row ${m}`),w=!1),l?.value||(S(l,"Please select a proficiency level"),b.push(`Row ${m} (${p})`),w=!1);const $=Number(r),x=k.video.existed.some(e=>Number(e)===Number(r)),I=k.video.uploaded.some(e=>Number(e)===Number(r)),T=k.video.removed.some(e=>Number(e)===Number(r));if(!x||T||I)if(T&&!I)S(d,"Please upload a demonstration video"),v.push(`Row ${m} (${p})`),w=!1;else if(I){const e=L(d.files[0],{allowedTypes:h,maxSize:52428800});e.valid||(S(d,e.message),o(`Unable to process video for "${p}": ${e.message}.`,"error"),w=!1)}else S(d,"Please upload a demonstration video"),v.push(`Row ${m} (${p})`),w=!1;else;if(c?.files?.[0]){const e=L(c.files[0],{allowedTypes:f,maxSize:10485760});if(e.valid){N("certificate",k.certificate.existed.includes($)?"changed":"uploaded",r)}else S(c,e.message),o(`Certificate issue detected for "${p}": ${e.message}.`,"error"),w=!1}if(u?.files?.[0]){const e=L(u.files[0],{allowedTypes:g,maxSize:5242880});if(e.valid){N("thumbnail",k.thumbnail.existed.includes($)?"changed":"uploaded",r)}else S(u,e.message),o(`Thumbnail issue detected for "${p}": ${e.message}.`,"error"),w=!1}w||(t=!1,e.length>1&&0===i&&a.scrollIntoView({behavior:"smooth",block:"center"}))}),E.length>0&&o(`The following skills are duplicated: ${E.join(", ")}.`,"error"),y.length>0&&o(`Please select a skill for: ${y.join(", ")}.`,"error"),b.length>0&&o(`Please specify a proficiency level for: ${b.join(", ")}.`,"error"),v.length>0&&o(`Please upload a demonstration video for: ${v.join(", ")}.`,"error"),t}function S(e,t){if(!e)return;e.classList.add("is-invalid");const n=document.createElement("div");n.className="invalid-feedback",n.textContent=t,e.closest(".form-group")?.appendChild(n)||e.parentNode?.appendChild(n)}function _(e){e.querySelectorAll(".is-invalid").forEach(e=>e.classList.remove("is-invalid")),e.querySelectorAll(".invalid-feedback").forEach(e=>e.remove())}function $(){Object.keys(k).forEach(e=>{Object.keys(k[e]).forEach(t=>{k[e][t]=[]})})}function x(e,t,n,a,i=!1){const o=t.parentNode,r=a.dataset.cardId,s=i?"remove_video_intro":`${"video"===e?"remove_skill_video_":"remove_certificate_"}${r}`,l="video"===e?"video-display":"cert-display";o.querySelector(`.${l}`)?.remove();const d=document.createElement("div");d.className=`d-flex align-items-center bg-light rounded p-2 ${l}`;const c=document.createElement("i");c.className="video"===e?"bi bi-file-earmark-play-fill text-primary fs-5 me-2":"bi bi-file-earmark-text-fill text-info fs-5 me-2";const u=document.createElement("span");u.className="small","video"===e?u.textContent="Video uploaded":"certificate"===e?u.textContent="Certificate uploaded":"thumbnail"===e&&(u.textContent="Thumbnail uploaded");const m=document.createElement("div");m.className="btn-group ms-auto";const p=document.createElement("button");p.type="button",p.className="btn btn-sm btn-outline-primary",p.innerHTML='<i class="bi bi-pencil-fill"></i>',p.setAttribute("data-bs-toggle","tooltip"),p.setAttribute("title","Change file"),p.onclick=()=>{t.value="";const i=Number(a.dataset.cardId);k.skills.existed.includes(i)&&N(e,"changed",i),t.click(),t.onchange=()=>{t.files.length&&(d.remove(),C(e,t,n,a))}};const h=document.createElement("button");return h.type="button",h.className="btn btn-sm btn-outline-danger",h.innerHTML='<i class="bi bi-trash-fill"></i>',h.setAttribute("data-bs-toggle","tooltip"),h.setAttribute("title","Remove file"),h.onclick=()=>{const i=document.createElement("input");i.type="hidden",i.name=s,i.value="true",a.appendChild(i),N(e,"removed",r),d.remove(),t.style.display="block",t.value="",n.style.display="block"},m.appendChild(p),m.appendChild(h),d.appendChild(c),d.appendChild(u),d.appendChild(m),o.insertBefore(d,t),t.style.display="none",n.style.display="none",M(),d}function I(e,t={}){if(console.log("createSkillCard called!!!"),!c)return console.error("Template not found!"),null;const n=c.content.cloneNode(!0).querySelector(".skill-card")||document.createElement("div");if(n.className="skill-card border rounded p-3 mb-3 bg-white shadow-sm",n.dataset.cardId=e,t.skillId||t.levelId){const e=n.querySelector('[name="skill"]'),a=n.querySelector('[name="level"]');e&&(e.value=t.skillId||""),a&&(a.value=t.levelId||"")}q(n);const a=Number(e);return t.isExisting?N("skills","existed",a):N("skills","new",a),n}function T(){if(console.log("addBlankSkillCard called"),B())return console.log("Skill limit reached, aborting card creation"),null;const e=Date.now().toString();console.log(`Generating card with ID ${e}`);const t=I(e);if(!t)return console.error("Failed to create skill card"),null;const n=m.querySelectorAll(".skill-card").length;if(console.log(`Current skill cards in container: ${n}`),m.querySelector(`.skill-card[data-card-id="${e}"]`))return console.warn(`Card with ID ${e} already exists, skipping append`),null;console.log(`Appending card with ID ${e} to container`),m.appendChild(t);const a=m.querySelectorAll(".skill-card").length;return console.log(`New skill card count after append: ${a}`),a!==n+1&&console.error(`Unexpected card count! Expected ${n+1}, got ${a}`),D(t,e),F(t,e),console.log(`Initializing tooltips for card ${e}`),M(),console.log(`Card ${e} added successfully`),e}function q(e){if("undefined"!=typeof Choices){const t=e.querySelector('[name="skill"]'),n=e.querySelector('[name="level"]'),a={searchEnabled:!0,removeItemButton:!0,shouldSort:!1,allowHTML:!0,classNames:{containerOuter:"choices",containerInner:"choices__inner bg-light",listDropdown:"choices__list--dropdown"}};t&&!t.hasAttribute("data-choicejs")&&(new Choices(t,a),t.setAttribute("data-choicejs","true")),n&&!n.hasAttribute("data-choicejs")&&(new Choices(n,a),n.setAttribute("data-choicejs","true"))}}function C(e,t,n,a,i={}){if(!t.files||0===t.files.length)return;const o=t.files[0].name,r=t.parentNode,s=a.dataset.cardId,l=Number(s);let d;d=k.skills.existed.includes(l)&&k[e].existed.includes(l)?"changed":"uploaded",N(e,d,l);const c=k?.[e];if(!c)return void console.warn(`Unknown file type tracker: ${e}`);const u=i.uSkillId||a.dataset.cardId,m=(void 0!==i.isNew?i.isNew:k.skills.new.includes(Number(u)),"video"===e?"bi bi-file-earmark-play-fill":"bi bi-file-earmark-text-fill");let p;"video"===e?p="remove_skill_video_":"certificate"===e?p="remove_certificate_":"thumbnail"===e&&(p="remove_thumbnail_");const h=`${p}${u}`;r.querySelector(".file-display")?.remove();const f=document.createElement("div");f.className="d-flex align-items-center bg-light rounded p-2 file-display";const g=document.createElement("i");g.className=`${m} text-success fs-5 me-2`;const y=document.createElement("span");y.className="small text-truncate me-3",y.style.maxWidth="150px",y.textContent=o;const b=document.createElement("button");b.type="button",b.className="btn btn-sm btn-outline-danger mx-auto",b.innerHTML='<i class="bi bi-trash-fill"></i>',b.setAttribute("data-bs-toggle","tooltip"),b.setAttribute("title","Remove file"),b.onclick=()=>{f.remove(),t.style.display="d-none",t.value="",n.style.display="block",c.uploaded=c.uploaded.filter(e=>e!==u);let e=a.querySelector(`input[name="${h}"]`);e||(e=document.createElement("input"),e.type="hidden",e.name=h,e.value="true",a.appendChild(e))},f.appendChild(g),f.appendChild(y),f.appendChild(b),n.style.display="none",t.style.display="none",r.insertBefore(f,t.nextSibling),a.querySelector(`input[name="${h}"]`)?.remove(),M()}function L(e,t){const n={valid:!0,message:""},a=e.name.split(".").pop().toLowerCase();if(t.allowedTypes&&!t.allowedTypes.includes(a))return n.valid=!1,n.message=`Invalid file type (.${a}). Allowed: ${t.allowedTypes.map(e=>`.${e}`).join(", ")}`,n;if(t.maxSize&&e.size>t.maxSize){n.valid=!1;const a=t.maxSize/1048576;return n.message=`File too large (${(e.size/1048576).toFixed(1)}MB). Maximum: ${a}MB`,n}return e.type.startsWith("video/")&&void 0!==t.minDuration&&(n.message="Duration validation would require file loading"),e.type.startsWith("image/")&&t.minDimensions&&(n.message="Dimension validation would require image loading"),n}function B(){const e=document.querySelector("#skillLimitAlert");return m.querySelectorAll(".skill-card").length>=d?(e&&e.classList.remove("d-none"),o(`You can add up to ${d} skills only.`,"error"),p.disabled=!0,!0):(e&&e.classList.add("d-none"),p.disabled=!1,!1)}function N(e,t,n,a=!1){const i=Number(n);Object.keys(k[e]).forEach(n=>{n!==t&&(k[e][n]=k[e][n].filter(e=>Number(e)!==i))}),k[e][t].includes(i)||k[e][t].push(i),a&&console.log(`${e} - ${t}: `,i,k[e][t])}function A(){"undefined"!=typeof Choices&&document.querySelectorAll(".js-choice:not([data-choicejs])").forEach(e=>{try{new Choices(e,{searchEnabled:!0,removeItemButton:!0,shouldSort:!1,classNames:{containerInner:"choices__inner bg-transparent",listDropdown:"choices__list--dropdown",item:"choices__item",placeholder:"choices__placeholder"}}),e.setAttribute("data-choicejs","true")}catch(e){console.error("Choices.js initialization failed:",e)}})}function M(){"undefined"!=typeof bootstrap&&document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(e=>{const t=bootstrap.Tooltip.getInstance(e);t&&t.dispose(),new bootstrap.Tooltip(e)})}function P(){console.log("Handler started"),this.disabled=!0,T(),setTimeout(()=>{this.disabled=!1},500)}function D(e,t){const n=e.querySelector('[name^="skill_video"]'),a=e.querySelector('[name^="certificate"]'),i=e.querySelector('[name^="thumbnail"]'),o=e.querySelector(".label_skill_video"),r=e.querySelector(".label_skill_certificate"),s=e.querySelector(".label_skill_thumbnail");n&&(n.name=`skill_video_${t}`,n.classList.add("skill_video_input")),a&&(a.name=`certificate_${t}`,a.classList.add("certificate_input")),i&&(i.name=`thumbnail_${t}`,i.classList.add("thumbnail_input")),n&&o&&(o.addEventListener("click",()=>n.click()),n.addEventListener("change",()=>{C("video",n,o,e,{uSkillId:t,isNew:k.skills.new.includes(t)})})),a&&r&&(r.addEventListener("click",()=>a.click()),a.addEventListener("change",()=>{C("certificate",a,r,e,{uSkillId:t,isNew:k.skills.new.includes(t)})})),i&&s&&(s.addEventListener("click",()=>i.click()),i.addEventListener("change",()=>{C("thumbnail",i,s,e,{uSkillId:t,isNew:k.skills.new.includes(t)})}))}function F(e,t){const n=e.querySelector(".remove-skill");if(!n)return;const a=Number(t);n.addEventListener("click",async function(){try{if(!await s("Are you sure you want to remove this skill?",{type:"danger",confirmText:"Yes, remove",cancelText:"Keep it"}))return;k.skills.existed.includes(a)?(N("video","removed",a),N("certificate","removed",a),N("thumbnail","removed",a),N("skills","removed",a)):k.skills.new=k.skills.new.filter(e=>e!==a),e.remove(),B()}catch(e){console.error("Error in removal process:",e)}})}document.addEventListener("DOMContentLoaded",function(){try{w(),A(),M(),p&&p.addEventListener("click",P)}catch(e){console.error("Initialization error:",e)}try{A()}catch(e){console.error(e)}try{M()}catch(e){console.error(e)}}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".method-card"),t=document.getElementById("methodHint");e.forEach(n=>{n.addEventListener("click",function(){const n=this.getAttribute("data-method");e.forEach(e=>e.classList.remove("active")),this.classList.add("active"),document.getElementById(`method_${n}`).checked=!0,document.getElementById("inPersonLocationSection").style.display="online"===n?"none":"block","hybrid"===n?t.innerHTML='\n                    <i class="bi bi-lightbulb-fill me-2 fs-5 text-warning"></i>\n                    <div>\n                        <strong>Hybrid Teaching - Maximize Your Opportunities</strong>\n                        <ul class="benefit-list mt-2 mb-0">\n                            <li><span class="highlight">Appear in both online and local searches</span> - double your visibility to potential students</li>\n                            <li><span class="highlight">Flexibility to accept both remote and local students</span> based on your schedule and preferences</li>\n                            <li><span class="highlight">Automatic fallback option</span> - if local students aren\'t available, you\'ll still get online opportunities</li>\n                            <li><span class="highlight">Higher acceptance rate</span> - students prefer tutors with multiple options</li>\n                        </ul>\n                        <p class="mt-2 mb-0">\n                            <small>Tutors who choose hybrid typically get their first student <span class="highlight">2x faster</span> and maintain <span class="highlight">40% more consistent bookings</span>.</small>\n                        </p>\n                    </div>\n                ':"online"===n?t.innerHTML='\n                    <i class="bi bi-lightbulb-fill me-2 fs-5 text-warning"></i>\n                    <div>\n                        <strong>Online Teaching - Global Reach</strong>\n                        <ul class="benefit-list mt-2 mb-0">\n                            <li><span class="highlight">Teach students from anywhere in the world</span> - no geographical limitations</li>\n                            <li><span class="highlight">Higher student volume</span> - access to a much larger pool of potential students</li>\n                            <li><span class="highlight">No travel time or expenses</span> - teach from the comfort of your home</li>\n                            <li><span class="highlight">Flexible scheduling</span> - easier to accommodate different time zones</li>\n                        </ul>\n                        <p class="mt-2 mb-0">\n                            <small>Online tutors typically build their student base <span class="highlight">30% faster</span> but may face more competition on pricing.</small>\n                        </p>\n                    </div>\n                ':"in_person"===n&&(t.innerHTML='\n                    <i class="bi bi-lightbulb-fill me-2 fs-5 text-warning"></i>\n                    <div>\n                        <strong>In-Person Teaching - Local Expertise</strong>\n                        <ul class="benefit-list mt-2 mb-0">\n                            <li><span class="highlight">Premium pricing potential</span> - in-person sessions typically command higher rates</li>\n                            <li><span class="highlight">Stronger student relationships</span> - face-to-face interaction builds better connections</li>\n                            <li><span class="highlight">Less competition</span> - you\'ll only compete with tutors in your local area</li>\n                            <li><span class="highlight">Specialized local knowledge</span> - understand local curriculum and requirements</li>\n                        </ul>\n                        <p class="mt-2 mb-0">\n                            <small>In-person tutors often achieve <span class="highlight">higher student retention rates</span> but may take longer to build their initial client base.</small>\n                        </p>\n                    </div>\n                ')})});const n=document.querySelector('input[name="meeting_method"]:checked');if(n){const e=document.querySelector(`.method-card[data-method="${n.value}"]`);e&&e.click()}else document.querySelector('.method-card[data-method="hybrid"]').click()});const H=parseInt(document.getElementById("maxEntries").value),z=document.getElementById("education-template"),R=document.getElementById("certification-template"),j=parseInt(document.getElementById("applicantUId").value),O=document.getElementById("education-container"),U=document.getElementById("certification-container"),W=((new Date).getFullYear(),{educationDoc:{existed:[],uploaded:[],changed:[],removed:[]},certificationDoc:{existed:[],uploaded:[],changed:[],removed:[]},certification:{new:[],existed:[],removed:[]},education:{new:[],existed:[],removed:[]}});function J(){const e=(new Date).getFullYear()+10,t=5242880,n=["pdf","jpg","jpeg","png"],a=[];O.querySelectorAll(".education-card").forEach((i,o)=>{const r=i.dataset.entryId,s=i.querySelector(`[name="education_remove_${r}"]`);if("true"===s?.value)return;const l=i.querySelector('[name="degree_level"]'),d=i.querySelector('[name="study_field"]'),c=i.querySelector('[name="institution"]'),u=i.querySelector('[name="start_year"]'),m=i.querySelector('[name="end_year"]'),p=i.querySelector('[name="description"]'),h=i.querySelector(`[name="education_doc_${r}"]`);l?.value||a.push({message:`Education #${o+1}: Please select a degree level`,selector:'[name="degree_level"]',cardId:r}),!d?.value||d.value.trim().length<2?a.push({message:`Education #${o+1}: Field of study must be at least 2 characters`,selector:'[name="study_field"]',cardId:r}):d.value.trim().length>100&&a.push({message:`Education #${o+1}: Field of study must be 100 characters or less`,selector:'[name="study_field"]',cardId:r}),!c?.value||c.value.trim().length<2?a.push({message:`Education #${o+1}: Institution name must be at least 2 characters`,selector:'[name="institution"]',cardId:r}):c.value.trim().length>150&&a.push({message:`Education #${o+1}: Institution name must be 150 characters or less`,selector:'[name="institution"]',cardId:r});const f=u?.value?parseInt(u.value,10):null,g=m?.value?parseInt(m.value,10):null;if(!f||isNaN(f)?a.push({message:`Education #${o+1}: Please enter a valid start year`,selector:'[name="start_year"]',cardId:r}):(f<1900||f>e)&&a.push({message:`Education #${o+1}: Start year must be between 1900 and ${e}`,selector:'[name="start_year"]',cardId:r}),!g||isNaN(g)?a.push({message:`Education #${o+1}: Please enter a valid graduation year`,selector:'[name="end_year"]',cardId:r}):g<1900||g>e?a.push({message:`Education #${o+1}: Graduation year must be between 1900 and ${e}`,selector:'[name="end_year"]',cardId:r}):f&&g<f&&a.push({message:`Education #${o+1}: Graduation year cannot be before start year`,selector:'[name="end_year"]',cardId:r}),p?.value&&p.value.length>500&&a.push({message:`Education #${o+1}: Description must be 500 characters or less`,selector:'[name="description"]',cardId:r}),h?.files[0]){const e=h.files[0];Z(e,n)?e.size>t&&a.push({message:`Education #${o+1}: Document exceeds maximum size of 5MB`,selector:`[name="education_doc_${r}"]`,cardId:r}):a.push({message:`Education #${o+1}: Invalid document format. Allowed: ${n.join(", ")}`,selector:`[name="education_doc_${r}"]`,cardId:r})}});if(U.querySelectorAll(".certification-card").forEach((i,o)=>{const r=i.dataset.entryId,s=i.querySelector(`[name="certification_remove_${r}"]`);if("true"===s?.value)return;const l=i.querySelector('[name="cert_name"]'),d=i.querySelector('[name="cert_org"]'),c=i.querySelector('[name="cert_year"]'),u=i.querySelector(`[name="certification_doc_${r}"]`);l?.value||a.push({message:`Certification #${o+1}: Please select a certificate name`,selector:'[name="cert_name"]',cardId:r}),!d?.value||d.value.trim().length<2?a.push({message:`Certification #${o+1}: Organization must be at least 2 characters`,selector:'[name="cert_org"]',cardId:r}):d.value.trim().length>150&&a.push({message:`Certification #${o+1}: Organization name must be 150 characters or less`,selector:'[name="cert_org"]',cardId:r});const m=c?.value?parseInt(c.value,10):null;!m||isNaN(m)?a.push({message:`Certification #${o+1}: Please enter a valid completion year`,selector:'[name="cert_year"]',cardId:r}):(m<1900||m>e)&&a.push({message:`Certification #${o+1}: Completion year must be between 1900 and ${e}`,selector:'[name="cert_year"]',cardId:r});const p=W.certification.new.includes(r),h=W.certificationDoc.existed.includes(r);if(!p||h||u?.files[0]){if(u?.files[0]){const e=u.files[0],i=e.name.split(".").pop().toLowerCase();n.includes(i)||a.push({message:`Certification #${o+1}: Invalid document format. Allowed: ${n.join(", ")}`,selector:`[name="certification_doc_${r}"]`,cardId:r}),e.size>t&&a.push({message:`Certification #${o+1}: Document exceeds maximum size of 5MB`,selector:`[name="certification_doc_${r}"]`,cardId:r})}}else a.push({message:`Certification #${o+1}: Please upload a document`,selector:`[name="certification_doc_${r}"]`,cardId:r})}),a.length>0){r(a);const e=a[0],t=document.querySelector(e.selector);return t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.focus()),!1}return!0}function V(){Object.keys(W).forEach(e=>{Object.keys(W[e]).forEach(t=>{W[e][t]=[]})})}function X(e){if(ne(e))return null;const t=`${e}_${Date.now()}`,n="education"===e?O:U,a=G(e,"education"===e?z:R,t);return a&&(n.appendChild(a),Q(e,"new",t)),t}function G(e,t,n,a={}){if(!t)return console.error(`${e} template not found!`),null;const i=t.content.cloneNode(!0).querySelector(`.${e}-card`);return i.dataset.entryId=n,"education"===e?(a.degree&&(i.querySelector('[name="degree_level"]').value=a.degree),a.field&&(i.querySelector('[name="study_field"]').value=a.field),a.institution&&(i.querySelector('[name="institution"]').value=a.institution),a.startYear&&(i.querySelector('[name="start_year"]').value=a.startYear),a.endYear&&(i.querySelector('[name="end_year"]').value=a.endYear),a.description&&(i.querySelector('[name="description"]').value=a.description)):"certification"===e&&(a.name&&(i.querySelector('[name="cert_name"]').value=a.name),a.org&&(i.querySelector('[name="cert_org"]').value=a.org),a.year&&(i.querySelector('[name="cert_year"]').value=a.year)),function(e){"undefined"!=typeof Choices&&e.querySelectorAll(".js-choice:not([data-choicejs])").forEach(e=>{try{new Choices(e,{searchEnabled:!0,removeItemButton:!0,shouldSort:!1,classNames:{containerInner:"choices__inner bg-transparent",listDropdown:"choices__list--dropdown",item:"choices__item",placeholder:"choices__placeholder"}}),e.setAttribute("data-choicejs","true")}catch(e){console.error("Choices.js initialization failed:",e)}})}(i),function(e,t,n){const a=t.querySelector(`.input-${e}-file`),i=t.querySelector(`.label-${e}-file`);a&&i&&(a.name=`${e}_doc_${n}`,i.addEventListener("click",()=>a.click()),a.addEventListener("change",()=>{K(e,a,i,t)}))}(e,i,n),function(e,t,n){const a=t.querySelector(".remove-entry");if(!a)return;a.addEventListener("click",async function(){try{if(!await s(`Are you sure you want to remove this ${e} entry?`,{type:"danger",confirmText:"Yes, remove",cancelText:"Keep it"}))return;if(W[e].existed.includes(n)){Q(e,"removed",n);(W[`${e}Doc`].existed.includes(n)||W[`${e}Doc`].uploaded.includes(n)||W[`${e}Doc`].changed.includes(n))&&Q(`${e}Doc`,"removed",n)}else W[e].new=W[e].new.filter(e=>e!==n),W[`${e}Doc`].uploaded=W[`${e}Doc`].uploaded.filter(e=>e!==n);t.remove(),ne(e)}catch(e){console.error("Error in removal process:",e)}})}(e,i,n),i}function Y(e,t){let n;const a="education"===e?z:R;if("education"===e){if(n=G(e,a,t.id,{degree:t.degree,field:t.field,institution:t.institution,startYear:t.start_year,endYear:t.end_year,description:t.description}),!n)return;O.appendChild(n)}else if("certification"===e){if(n=G(e,a,t.id,{name:t.name,org:t.organization,year:t.completion_year}),!n)return;U.appendChild(n)}const i=n.querySelector(`.input-${e}-file`),o=n.querySelector(`.label-${e}-file`),r=t.document;i&&o&&r&&function(e,t,n,a){const i=t.parentNode,o=a.dataset.entryId,r=`${e}_remove_${o}`;i.querySelector(".file-display")?.remove();const s=document.createElement("div");s.className="d-flex align-items-center bg-light rounded  file-display";const l=document.createElement("i");l.className="bi bi-file-earmark-text-fill text-primary fs-5 me-2";const d=document.createElement("span");d.className="small",d.textContent="Document uploaded";const c=document.createElement("div");c.className="btn-group ms-auto";const u=document.createElement("button");u.type="button",u.className="btn btn-sm btn-outline-primary",u.innerHTML='<i class="bi bi-pencil-fill"></i>',u.setAttribute("data-bs-toggle","tooltip"),u.setAttribute("title","Change file"),u.onclick=()=>{t.click(),t.onchange=()=>{t.files.length&&(s.remove(),K(e,t,n,a),Q(`${e}Doc`,"changed",o))}};const m=document.createElement("button");m.type="button",m.className="btn btn-sm btn-outline-danger",m.innerHTML='<i class="bi bi-trash-fill"></i>',m.setAttribute("data-bs-toggle","tooltip"),m.setAttribute("title","Remove file"),m.onclick=()=>{const i=document.createElement("input");i.type="hidden",i.name=r,i.value="true",a.appendChild(i),Q(`${e}Doc`,"removed",o),s.remove(),t.style.display="block",t.value="",n.style.display="block"},c.appendChild(u),c.appendChild(m),s.appendChild(l),s.appendChild(d),s.appendChild(c),i.insertBefore(s,t),t.style.display="none",n.style.display="none",te()}(e,i,o,n)}function K(e,t,n,a){if(!t.files||0===t.files.length)return;const i=t.files[0].name,o=t.parentNode,r=a.dataset.entryId,s=W[`${e}Doc`].existed.includes(r)?"changed":"uploaded";Q(`${e}Doc`,s,r),o.querySelector(".file-display")?.remove();const l=document.createElement("div");l.className="d-flex align-items-center bg-light rounded file-display";const d=document.createElement("i");d.className="bi bi-file-earmark-text-fill text-success fs-5 me-2";const c=document.createElement("span");c.className="small text-truncate me-3",c.style.maxWidth="150px",c.textContent=i;const u=document.createElement("button");u.type="button",u.className="btn btn-sm btn-outline-danger ms-auto",u.innerHTML='<i class="bi bi-trash-fill"></i>',u.setAttribute("data-bs-toggle","tooltip"),u.setAttribute("title","Remove file"),u.onclick=()=>{l.remove(),t.style.display="none",t.value="",n.style.display="block","uploaded"===s?W[`${e}Doc`].uploaded=W[`${e}Doc`].uploaded.filter(e=>e!==r):Q(`${e}Doc`,"removed",r)},l.appendChild(d),l.appendChild(c),l.appendChild(u),n.style.display="none",t.style.display="none",o.insertBefore(l,t.nextSibling),te()}function Z(e,t){if(!e||!e.name)return!1;const n=e.name.split(".").pop().toLowerCase();return t.includes(n)}function Q(e,t,n,a=!1){Object.keys(W[e]).forEach(a=>{a!==t&&(W[e][a]=W[e][a].filter(e=>e!==n))}),W[e][t].includes(n)||W[e][t].push(n),a&&console.log(`${e} - ${t}: `,W[e][t])}async function ee(){try{const e=await fetch(`/tutor/get-education-data/?applicantUId=${j}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();if("success"!==t.status)throw new Error(t.message||"Failed to load data");O.innerHTML="",U.innerHTML="",t.education&&Array.isArray(t.education)&&t.education.forEach(e=>{Y("education",{id:e.id,degree:e.degree,field:e.field,institution:e.institution,start_year:e.start_year,end_year:e.end_year,description:e.description,document:e.document}),Q("education","existed",e.id),e.document&&Q("educationDoc","existed",e.id)}),t.certifications&&Array.isArray(t.certifications)&&t.certifications.forEach(e=>{Y("certification",{id:e.id,name:e.name,organization:e.organization,completion_year:e.completion_year,document:e.document}),Q("certification","existed",e.id),e.document&&Q("certificationDoc","existed",e.id)})}catch(e){console.error("Error loading education data:",e),o("Failed to load education data. Please refresh the page.","error")}}function te(){"undefined"!=typeof bootstrap&&document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(e=>{const t=bootstrap.Tooltip.getInstance(e);t&&t.dispose(),new bootstrap.Tooltip(e)})}function ne(e,t=H){const{container:n,cardClass:a,addButton:i,alertMessage:r}={education:{container:"#education-container",cardClass:".education-card",addButton:"#btnAddEducation",alertMessage:"#educationLimitAlert"},certification:{container:"#certification-container",cardClass:".certification-card",addButton:"#btnAddCertification",alertMessage:"#certificationLimitAlert"}}[e]||{};if(!n||!a||!i)return console.error(`Missing configuration for type: ${e}`),!0;const s=document.querySelector(n),l=document.querySelector(r),d=document.querySelector(i);if(!s||!d)return console.error(`Missing elements for type: ${e}`),!0;const c=s.querySelectorAll(a).length>=t;return l&&l.classList.toggle("d-none",!c),d.disabled=c,c&&o(`Maximum ${t} ${e}s allowed`,"error"),c}document.addEventListener("DOMContentLoaded",function(){document.getElementById("btnAddEducation")?.addEventListener("click",()=>X("education")),document.getElementById("btnAddCertification")?.addEventListener("click",()=>X("certification"));try{ee(),A(),te()}catch(e){console.error("Initialization error:",e)}});const ae=document.getElementById("AccordionWeekDays"),ie=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],oe=["SUN","MON","TUE","WED","THU","FRI","SAT"],re=document.getElementById("freeWeek"),se=document.getElementById("providerUId").value,le=document.getElementById("timezone-select"),de={};let ce,ue,me=null,pe=[],he=0,fe=[],ge=[],ye=2;function be(){le.addEventListener("change",function(){ce=this.value,o(`Timezone updated to: ${ce}`,"info"),oe.forEach(e=>{const t=document.getElementById(`timeSlots_${e}`);t&&(t.innerHTML="")}),pe=[],fe=[],ge=[],me=[],xe(ce)})}function ve(){document.querySelectorAll(".accordion-button").forEach(e=>{e.addEventListener("click",function(){const e=this.getAttribute("data-bs-target"),t=document.querySelector(e);setTimeout(()=>{t.scrollIntoView({behavior:"smooth",block:"nearest"})},300)})}),document.addEventListener("keydown",function(e){if("Escape"===e.key){document.querySelectorAll(".accordion-collapse.show").forEach(e=>{bootstrap.Collapse.getInstance(e).hide()})}})}function Ee(){ae.innerHTML="";for(let e=0;e<7;e++){const t=ie[e],n=oe[e],a=document.createElement("div");a.className="col-12 col-sm-6 col-md-6 col-lg-6";const i=document.createElement("div");i.className="accordion-item border-0 mb-3",i.innerHTML=`\n            <h6 class="accordion-header" id="heading_${n}">\n                <button class="accordion-button collapsed rounded-3 bg-light" type="button" data-bs-toggle="collapse"\n                        data-bs-target="#collapse_${n}" aria-expanded="false" aria-controls="collapse_${n}">\n                    <i class="bi bi-calendar-check me-2 text-primary"></i>\n                    <span class="fw-semibold">${t}</span>\n                </button>\n            </h6>\n            <div id="collapse_${n}" class="accordion-collapse collapse" aria-labelledby="heading_${n}"\n                 data-bs-parent="#AccordionWeekDays">\n                <div class="accordion-body pt-3">\n                    <div id="timeSlots_${n}" class="time-slots-container mb-3"></div>\n                    \n                    <div class="card bg-light border-0">\n                        <div class="card-body p-3">\n                            <div class="row gx-2 align-items-center flex-nowrap">\n                                <div class="bg-light rounded p-3">\n                                    \x3c!-- Time Inputs Row --\x3e\n                                    <div class="row g-2 align-items-center mb-2">\n                                        <div class="col-12">\n                                            <div class="d-flex align-items-center gap-2">\n                                                <input type="time" class="form-control form-control-sm flex-grow-1" \n                                                       id="startTime_${n}" placeholder="Start" step="1800">\n                                                <span class="text-muted fw-bold">-</span>\n                                                <input type="time" class="form-control form-control-sm flex-grow-1" \n                                                       id="endTime_${n}" placeholder="End" step="1800">\n                                            </div>\n                                        </div>\n                                    </div>\n                                    \n                                    \x3c!-- Buttons Row --\x3e\n                                    <div class="row g-2 align-items-center">\n                                        <div class="col-8">\n                                            <div class="d-flex gap-2">\n                                                <button class="btn btn-sm btn-primary flex-fill" id="addTime_${n}">\n                                                    <i class="bi bi-plus-circle me-1"></i>Add\n                                                </button>\n                                                <button class="btn btn-sm btn-outline-danger flex-fill" id="clear_${n}">\n                                                    <i class="bi bi-eraser"></i> Clear\n                                                </button>\n                                            </div>\n                                        </div>\n                                        <div class="col-4">\n                                            <div class="form-check form-switch mb-0">\n                                                <input class="form-check-input" type="checkbox" id="freeDay_${n}">\n                                                <label class="form-check-label small text-muted" for="freeDay_${n}">\n                                                    All day\n                                                </label>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `,a.appendChild(i),ae.appendChild(a)}}function ke(e){let t=null;if(document.cookie&&""!==document.cookie){const n=document.cookie.split(";");for(let a=0;a<n.length;a++){const i=n[a].trim();if(i.substring(0,e.length+1)===e+"="){t=decodeURIComponent(i.substring(e.length+1));break}}}return t}function we(e,t){const n="24:00"===t,a="24:00"===e?"23:59":e,i=n?"23:59":t,r=e=>{if("24:00"===e)return!0;const t=e.split(":")[1];return"00"===t||"30"===t||n&&"59"===t};return r(e)&&r(t)?"24:00"===e?(o("Start time cannot be 24:00. Please use 00:00 instead.","error"),!1):!(a>=i)||(o("End time must be after start time.","error"),!1):(o("Please enter times with minutes rounded to 00 or 30 (e.g., 10:00, 10:30).","error"),!1)}function Se(e,t,n){const a=document.getElementById(`timeSlots_${e}`),i=Array.from(a.children),o=e=>"24:00"===e?"23:59":e,r=o(t),s=o(n);for(const e of i){const t=e.querySelector("span:nth-child(3)")?.textContent.trim();if(t){let[e,n]=t.split(" - ");n.length>5&&(n="24:00");const a=o(e),i=o(n);if(r>=a&&r<i||s>a&&s<=i||r<=a&&s>=i)return!0}}return!1}function _e(e){const t=document.getElementById(`timeSlots_${e}`);Array.from(t.children).forEach(e=>{const t=e.querySelector('input[type="hidden"]');if(t){const e=t.value;e.startsWith("newTS_")?pe=pe.filter(t=>t.tsId!==e):ge.push(e)}}),fe=fe.filter(t=>t.day!==e),t.innerHTML=""}async function $e(){try{const e="/schedule/fetch-appointment-settings/",t=await fetch(e);if(t.ok){const e=await t.json();ce=e.user_timezone,ce&&le.querySelector(`option[value="${ce}"]`)||(ce=Intl.DateTimeFormat().resolvedOptions().timeZone),le.value=ce,ye=parseInt(e.session_length)||2,ue=e.class_type}}catch(e){console.error("Error fetching timezone:",e),ce=Intl.DateTimeFormat().resolvedOptions().timeZone,le.value=ce}}async function xe(e=null){let t=`/schedule/get-available-rules/?providerUId=${se}`;e&&(t+=`&timezone=${encodeURIComponent(e)}`);try{const e=await fetch(t);if(!e.ok)throw new Error("Failed to fetch availability data");const n=await e.json();if("success"!==n.status)throw new Error(n.message||"Failed to load availability");oe.forEach(e=>{const t=document.getElementById(`timeSlots_${e}`);t&&(t.innerHTML="")}),fe=[],n.availability.forEach(e=>{const t=e.availId,n=e.is_full_day,a=e.is_partial_day||!1,i=e.weekday,o=e.original_weekday,r=oe[parseInt(i)],s=e.start_time_local,l=e.end_time_local;if(r){if(n&&!a&&i===o){const e=document.getElementById(`freeDay_${r}`);e&&(e.checked=!0,qe(r,!0))}Ie(t,r,s,l,n,a,o),fe.push({tsId:t,day:r,start:s,end:l,isFullDay:n,isPartialDay:a,originalWeekday:o})}})}catch(e){console.error("Error fetching availability:",e),o("Failed to load availability: "+e.message,"error")}}function Ie(e,t,n,a,i=!1,o=!1,r=null){const s=document.getElementById(`timeSlots_${t}`);if(!s)return void console.error(`Time slots container for ${t} not found`);const l=s.querySelectorAll('input[type="hidden"]');for(const t of l)if(t.value===e.toString())return;let d="";if(o&&null!==r){d=`Part of ${oe[parseInt(r)]}'s availability in tutor's timezone`}const c=document.createElement("div");c.innerHTML=`\n      <div class="d-flex justify-content-between align-items-center mb-2 ${i?"full-day-slot":""} ${o?"partial-day-slot":""}"\n           ${d?`data-bs-toggle="tooltip" title="${d}"`:""}>\n        <div class="position-relative time-slots">\n          <span class="btn ${i?"btn-success":o?"btn-warning":"btn-primary"} btn-round btn-sm mb-0 stretched-link position-static">\n            <i class="fas ${i?"fa-calendar-day":o?"fa-clock":"fa-calendar-check"}"></i>\n          </span>\n          <span class="ms-2 mb-0 h6 fw-light">${t}</span>\n          <span class="ms-2 mb-0 h6 fw-light">${n} - ${a}</span>\n          <input type="hidden" value="${e}">\n          ${i?'<span class="badge bg-info ms-2">All Day</span>':""}\n          ${o?'<span class="badge bg-warning ms-2">Timezone Adjusted</span>':""}\n        </div>\n        <div>\n          <button class="btn btn-sm btn-danger-soft btn-round mb-0" onclick="deleteTimeSlot(this)">\n            <i class="fas fa-fw fa-times"></i>\n          </button>\n        </div>\n      </div>\n    `,s.appendChild(c),d&&new bootstrap.Tooltip(c)}function Te(e,t=!1){const n=document.getElementById(`freeDay_${e}`),a=document.getElementById(`timeSlots_${e}`);if(n&&a)if(t&&(n.checked=!0),n.checked){de[e]=a.innerHTML,_e(e),a.innerHTML="";const t=document.createElement("div");t.innerHTML=`\n          <div class="d-flex justify-content-between align-items-center mb-2 full-day-slot">\n              <div class="position-relative time-slots">\n                  <span class="btn btn-success btn-round btn-sm mb-0 stretched-link position-static"><i class="fas fa-calendar-day"></i></span>\n                  <span class="ms-2 mb-0 h6 fw-light">${e}</span>\n                  <span class="ms-2 mb-0 h6 fw-light">00:00 - 24:00</span>\n                  <input type="hidden" value="newTS_Full_${e}">\n                  <span class="badge bg-info ms-2">All Day</span>\n              </div>\n              <div>\n                <button class="btn btn-sm btn-danger-soft btn-round mb-0" onclick="deleteTimeSlot(this)">\n                  <i class="fas fa-fw fa-times"></i>\n                </button>\n              </div>\n          </div>\n        `,a.appendChild(t);const n={tsId:`newTS_Full_${e}`,providerUId:se,timezone:ce,day:e,startTime:"00:00",endTime:"24:00",isFullDay:!0};pe=pe.filter(t=>t.day!==e),pe.push(n),qe(e,!0)}else qe(e,!1),pe=pe.filter(t=>!(t.day===e&&t.isFullDay)),de[e]?(a.innerHTML=de[e],a.querySelectorAll(".btn-danger-soft").forEach(e=>{e.onclick=function(){deleteTimeSlot(this)}})):a.innerHTML="";else console.error(`Checkbox or time slots container for ${e} not found!`)}function qe(e,t){document.getElementById(`addTime_${e}`).disabled=t,document.getElementById(`clear_${e}`).disabled=t,document.getElementById(`startTime_${e}`).disabled=t,document.getElementById(`endTime_${e}`).disabled=t}window.deleteTimeSlot=function(e){const t=e.closest(".d-flex"),n=t.querySelector('input[type="hidden"]');if(n){const e=n.value;t.remove(),e.startsWith("newTS_")?pe=pe.filter(t=>t.tsId!==e):(fe=fe.filter(t=>t.tsId!=e),ge.push(e))}},window.deleteTimeSlot=function(e){const t=e.closest(".d-flex"),n=t.querySelector('input[type="hidden"]');if(n){const e=n.value;t.remove();if(t.classList.contains("full-day-slot")){const e=t.querySelector(".h6.fw-light").textContent,n=document.getElementById(`freeDay_${e}`);n&&(n.checked=!1,qe(e,!1))}e.startsWith("newTS_")?pe=pe.filter(t=>t.tsId!==e):(fe=fe.filter(t=>t.tsId!=e),ge.push(e))}};const Ce=document.createElement("style");Ce.textContent="\n.full-day-slot {\n    background-color: #f0f9ff;\n    border-left: 4px solid #0d6efd;\n    padding-left: 8px;\n    border-radius: 4px;\n}\n.partial-day-slot {\n    background-color: #fff3cd;\n    border-left: 4px solid #ffc107;\n    padding-left: 8px;\n    border-radius: 4px;\n}\n.time-slots-container {\n    max-height: 200px;\n    overflow-y: auto;\n}\n",document.head.appendChild(Ce),document.addEventListener("DOMContentLoaded",async()=>{ae.addEventListener("click",e=>{const t=e.target.closest("button");if(t){if(t.id&&t.id.startsWith("addTime_")){!function(e){const t=document.getElementById(`freeDay_${e}`);if(t&&t.checked)return void o(`Cannot add time slots when "${e}" is set to "All day". Please uncheck "All day" first.`,"error");const n=document.getElementById(`startTime_${e}`),a=document.getElementById(`endTime_${e}`),i=n.value,r=a.value;if(!i||!r)return void o("Please fill in both start and end times.","error");if(!we(i,r))return;if(Se(e,i,r))return void o(`This time slot overlaps with an existing one. Please choose a different time in ${ie[oe.indexOf(e)]}.`,"error");const s="newTS_"+he++,l="23:59"===r?"24:00":r,d=document.createElement("div");d.innerHTML=`\n      <div class="d-flex justify-content-between align-items-center mb-2">\n        <div class="position-relative time-slots">\n          <span class="btn btn-primary btn-round btn-sm mb-0 stretched-link position-static"><i class="fas fa-calendar-check"></i></span>\n          <span class="ms-2 mb-0 h6 fw-light">${e}</span>\n          <span class="ms-2 mb-0 h6 fw-light">${i} - ${l}</span>\n          <input type="hidden" value="${s}">\n        </div>\n        <div>\n          <button class="btn btn-sm btn-danger-soft btn-round mb-0" onclick="deleteTimeSlot(this)"><i class="fas fa-fw fa-times"></i></button>\n        </div>\n      </div>\n    `,document.getElementById(`timeSlots_${e}`).appendChild(d);const c={tsId:s,providerUId:se,timezone:ce,day:e,startTime:i,endTime:"23:59"===r?"24:00":r,isFullDay:!1};pe.push(c),n.value="",a.value=""}(t.id.replace("addTime_",""))}if(t.id&&t.id.startsWith("clear_")){_e(t.id.replace("clear_",""))}}}),ae.addEventListener("change",e=>{const t=e.target;if(t.id&&t.id.startsWith("freeDay_")){Te(t.id.replace("freeDay_",""))}}),re&&re.addEventListener("change",()=>{const e=re.checked;oe.forEach(t=>{const n=document.getElementById(`freeDay_${t}`);n&&(n.checked=e,Te(t,!0))})}),async function(){await $e(),be(),Ee(),ve(),xe(ce)}()});const Le=document.getElementById("lessonPrice"),Be=document.getElementById("followRecommendation"),Ne=document.getElementById("yourEarnings"),Ae=document.getElementById("platformFee"),Me=document.getElementById("commissionRate"),Pe=document.getElementById("lessonsPerWeek"),De=document.getElementById("lessonsValue"),Fe=document.getElementById("monthlyEarnings"),He=document.getElementById("weeklyEarnings"),ze=document.getElementById("quarterlyEarnings"),Re=document.getElementById("yearlyEarnings"),je=document.getElementById("sliderTooltip"),Oe=[{hours:0,rate:.3},{hours:20,rate:.25},{hours:50,rate:.22},{hours:100,rate:.19},{hours:200,rate:.15}];let Ue=Oe[0].rate,We=0,Je=0;function Ve(){const e=parseFloat(Le.value)||25,t=e*Ue,n=e-t;Me.textContent=`${Math.round(100*Ue)}%`,Ne.textContent=`$${n.toFixed(2)}`,Ae.textContent=`$${t.toFixed(2)}`;const a=document.querySelector(".progress-bar");let i=0;if(We<Oe.length-1){const e=Oe[We+1].hours;i=Math.min(100,Je/e*100)}else i=100;a.style.width=`${i}%`,a.setAttribute("aria-valuenow",i),function(e){const t=document.querySelectorAll("#commissionTable tbody tr");Oe.forEach((n,a)=>{if(t[a]){const i=e*n.rate,o=e-i,r=t[a].cells[2];r&&(r.textContent=`$${o.toFixed(2)} per lesson`),n.rate===Ue?t[a].classList.add("table-primary"):t[a].classList.remove("table-primary")}})}(e),Xe()}function Xe(){const e=parseFloat(Le.value)||25,t=parseInt(Pe.value),n=e*(1-Ue)*t,a=4.33*n,i=3*a,o=12*a;De.textContent=`${t} lesson${1!==t?"s":""}`,Fe.textContent=`$${Math.round(a)}`,He.textContent=`$${n.toFixed(2)}`,ze.textContent=`$${Math.round(i)}`,Re.textContent=`$${Math.round(o)}`,Fe.parentElement.parentElement.classList.add("pulse-animation"),setTimeout(()=>{Fe.parentElement.parentElement.classList.remove("pulse-animation")},1e3)}function Ge(){for(let e=Oe.length-1;e>=0;e--)if(Je>=Oe[e].hours){Ue=Oe[e].rate,We=e;break}}function Ye(e){let t=null;if(document.cookie&&""!==document.cookie){const n=document.cookie.split(";");for(let a=0;a<n.length;a++){const i=n[a].trim();if(i.substring(0,e.length+1)===e+"="){t=decodeURIComponent(i.substring(e.length+1));break}}}return t}Pe.addEventListener("input",function(){De.textContent=`${this.value} lesson${"1"!==this.value?"s":""}`,je.textContent=`${this.value} lessons`,je.style.left=this.value/this.max*100+"%",Xe()}),Pe.addEventListener("mousedown",function(){je.style.opacity="1"}),Pe.addEventListener("mouseup",function(){setTimeout(()=>{je.style.opacity="0"},1e3)}),Be.addEventListener("change",function(){this.checked&&(Le.value=25,Ve(),Le.classList.add("highlight-change"),setTimeout(()=>{Le.classList.remove("highlight-change")},1e3))}),Le.addEventListener("input",Ve),Le.addEventListener("change",function(){let e=parseFloat(this.value);isNaN(e)||e<10?this.value=10:e>100&&(this.value=100),25!==e&&(Be.checked=!1),Ve(),this.classList.add("highlight-change"),setTimeout(()=>{this.classList.remove("highlight-change")},1e3)}),document.addEventListener("keydown",function(e){"ArrowUp"===e.key?(Je+=5,Ge(),Ve()):"ArrowDown"===e.key&&Je>0&&(Je-=5,Ge(),Ve())}),document.addEventListener("DOMContentLoaded",function(){!async function(){try{const e=await fetch("/tutor/get-pricing/",{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}});if(!e.ok)throw new Error("Failed to fetch pricing data");const t=await e.json();return"success"===t.status?(document.getElementById("lessonPrice").value=t.cost_hourly,Ve(),t.cost_hourly):(console.error("Error fetching pricing:",t.message),null)}catch(e){return console.error("Error in fetchCurrentPricing:",e),null}}(),Ve(),Xe()});parseInt(document.getElementById("maxEntries").value);const Ke=document.querySelector(".bs-stepper"),Ze=(new Stepper(Ke,{linear:!0}),new Set([0]));window.completedSteps=Ze;let Qe=1;function et(e){return 3===e?(console.log("Skipping step 3 ..."),location.reload(),!0):(console.error("Unknown step:",e),!1)}function tt(e){switch(e){case 1:return async function(){const e=document.getElementById("profileForm");if(!e)return console.error("Profile form not found"),!1;const t=document.querySelector("#btnSave_profile, #btnNext_profile"),n=t?.innerHTML;try{if(!function(){const e=document.getElementById("profileForm");let t=!0;if(e.querySelectorAll(".is-invalid").forEach(e=>e.classList.remove("is-invalid")),e.querySelectorAll(".invalid-feedback").forEach(e=>e.remove()),e.querySelectorAll("[required]").forEach(e=>{if(!e.value.trim()){e.classList.add("is-invalid"),t=!1;const n=document.createElement("div");n.className="invalid-feedback",n.textContent=e.dataset.error||"This field is required",e.parentNode.appendChild(n)}}),!t){const t=e.querySelector(".is-invalid");t?.scrollIntoView({behavior:"smooth",block:"center"}),t?.focus()}return t}())return o("Please correct the errors, then retry.","error"),!1;if(!(0,a.Q)())return o("Please insert a valid phone number, then retry.","error"),!1;t&&(t.disabled=!0,t.innerHTML='\n                <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>\n                Processing...\n            ');const n=new FormData(e),i="/tutor/wizard/submit-profile/",r=await fetch(i,{method:"POST",body:n,headers:{"X-CSRFToken":document.querySelector("[name=csrfmiddlewaretoken]").value}}),s=await r.json();if(!s.success){if(s.errors){st();for(const e in s.errors)lt(e,s.errors[e])}throw new Error(s.message||"Form submission failed")}return o("Your profile saved successfully.","success"),Ze.add(1),it(),!0}catch(e){return console.error("Error saving profile:",e),o("An error occurred. Please try again.","error"),!1}finally{t&&(t.disabled=!1,t.innerHTML=n)}}();case 2:return async function(){if(!validate_skills())return!1;try{const e=await async function(){if(!validate_skills())return{success:!1,error:"Validation failed"};const e=new FormData;try{e.append("skills_removed",JSON.stringify(k.skills.removed)),e.append("skills_new",JSON.stringify(k.skills.new)),e.append("videos_new",JSON.stringify(k.video.uploaded)),e.append("videos_changed",JSON.stringify(k.video.changed)),e.append("videos_removed",JSON.stringify(k.video.removed)),e.append("certs_new",JSON.stringify(k.certificate.uploaded)),e.append("certs_changed",JSON.stringify(k.certificate.changed)),e.append("certs_removed",JSON.stringify(k.certificate.removed)),e.append("thumbs_new",JSON.stringify(k.thumbnail.uploaded)),e.append("thumbs_changed",JSON.stringify(k.thumbnail.changed)),e.append("thumbs_removed",JSON.stringify(k.thumbnail.removed)),document.querySelectorAll(".skill-card").forEach(t=>{const n=t.dataset.cardId,a=k.skills.new.includes(Number(n));e.append("skill_ids[]",n),e.append("skills[]",t.querySelector('[name^="skill"]').value),e.append("levels[]",t.querySelector('[name^="level"]').value);const i=t.querySelector(`[name="skill_video_${n}"]`);i?.files[0]&&e.append(`skill_video_${n}`,i.files[0]);const o=t.querySelector(`[name="certificate_${n}"]`);o?.files[0]&&e.append(`certificate_${n}`,o.files[0]);const r=t.querySelector(`[name="thumbnail_${n}"]`);if(r?.files[0]&&e.append(`thumbnail_${n}`,r.files[0]),!a){const a=t.querySelector(`[name="remove_skill_${n}"]`);a&&e.append(a.name,a.value)}});const t=document.querySelector('[name="csrfmiddlewaretoken"]')?.value;t&&e.append("csrfmiddlewaretoken",t);const n=new XMLHttpRequest;return n.open("POST","/tutor/save-skills/",!0),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.show("Uploading Skills Data"),new Promise((t,a)=>{n.upload.onprogress=e=>{l.updateProgress(e)},l.setupCancelButton(n),n.onload=async()=>{if(n.status>=200&&n.status<300)try{const e=JSON.parse(n.responseText);if(e.success){e.skill_mapping&&Object.entries(e.skill_mapping).forEach(([e,t])=>{const n=document.querySelector(`.skill-card[data-card-id="${e}"]`);n&&(n.dataset.cardId=t,["skill_video","certificate","thumbnail"].forEach(a=>{const i=n.querySelector(`[name^="${a}"]`);i&&(i.name=i.name.replace(`${a}_${e}`,`${a}_${t}`))}))}),$(),l.markSuccess("Upload completed! Finalizing...");try{await w(),setTimeout(()=>l.hide(),1e3),t(e)}catch(n){console.error("Error loading skills:",n),l.hide(),o("Skills saved but there was an issue refreshing the page.","warning"),t(e)}}else l.markError(e.error||"Failed to save skills data."),setTimeout(()=>l.hide(),2e3),o(e.error||"Failed to save skills data.","error"),a(new Error(e.error||"Failed to save skills data"))}catch(e){l.markError("Invalid server response."),setTimeout(()=>l.hide(),2e3),o("Invalid server response.","error"),a(new Error("Invalid server response"))}else l.markError(`Server error: ${n.status}`),setTimeout(()=>l.hide(),2e3),o("Failed to save skills data.","error"),a(new Error(`HTTP error: ${n.status}`))},n.onerror=()=>{l.markError("Network error during upload."),setTimeout(()=>l.hide(),2e3),o("Network error during upload.","error"),a(new Error("Network error"))},n.onabort=()=>{l.hide(),o("Upload cancelled.","info"),a(new Error("Upload aborted"))},n.timeout=3e4,n.ontimeout=()=>{l.markError("Request timed out."),setTimeout(()=>l.hide(),2e3),o("Request timed out.","error"),a(new Error("Timeout"))},n.send(e)})}catch(e){return l.hide(),console.error("Submission error:",e),o(e.message||"Failed to save skills data. Please try again.","error"),{success:!1,error:e.message||"Failed to save skills data"}}}();return e.success?(o("Your skills saved successfully.","success"),!0):(o(e.error||"Error saving skills","error"),!1)}catch(e){return console.error("Error saving skills:",e),o("Error saving skills","error"),!1}}();case 3:return async function(){const e=document.getElementById("providerLocationForm");if(!e)return console.error("location form not found"),!1;const t=document.querySelector("#btnSave_method, #btnNext_method"),n=t?.innerHTML;try{t&&(t.disabled=!0,t.innerHTML='\n                <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>\n                Processing...\n            ');const n=new FormData(e),a="/tutor/wizard/submit-teaching-method/",i=await fetch(a,{method:"POST",body:n,headers:{"X-CSRFToken":document.querySelector("[name=csrfmiddlewaretoken]").value}}),r=await i.json();if(!r.success){if(r.errors){st();for(const e in r.errors)lt(e,r.errors[e])}throw new Error(r.message||"Form submission failed")}return o("Your teaching method saved successfully.","success"),Ze.add(3),it(),!0}catch(e){return console.error("Error saving teaching method:",e),o("An error occurred. Please try again.","error"),!1}finally{t&&(t.disabled=!1,t.innerHTML=n)}}();case 4:return async function(){if(!J())return!1;try{const e=await async function(){if(!J())return o("Please correct the errors in the form before submitting.","error"),{success:!1,error:"Validation failed"};const e=new FormData;try{e.append("years_experience",document.querySelector("#id_years_experience").value);const t=Array.from(document.querySelectorAll("#id_teaching_tags option:checked")).map(e=>e.value);e.append("teaching_tags",JSON.stringify(t)),e.append("education_new",JSON.stringify(W.education.new)),e.append("education_removed",JSON.stringify(W.education.removed)),e.append("education_doc_uploaded",JSON.stringify(W.educationDoc.uploaded)),e.append("education_doc_changed",JSON.stringify(W.educationDoc.changed)),e.append("education_doc_removed",JSON.stringify(W.educationDoc.removed)),e.append("certification_new",JSON.stringify(W.certification.new)),e.append("certification_removed",JSON.stringify(W.certification.removed)),e.append("certification_doc_uploaded",JSON.stringify(W.certificationDoc.uploaded)),e.append("certification_doc_changed",JSON.stringify(W.certificationDoc.changed)),e.append("certification_doc_removed",JSON.stringify(W.certificationDoc.removed)),O.querySelectorAll(".education-card").forEach(t=>{const n=t.dataset.entryId;e.append("education_ids[]",n),e.append("degrees[]",t.querySelector('[name="degree_level"]').value),e.append("fields[]",t.querySelector('[name="study_field"]').value),e.append("institutions[]",t.querySelector('[name="institution"]').value),e.append("start_years[]",t.querySelector('[name="start_year"]').value),e.append("end_years[]",t.querySelector('[name="end_year"]').value),e.append("descriptions[]",t.querySelector('[name="description"]').value||"");const a=t.querySelector(`[name="education_doc_${n}"]`);a?.files[0]&&e.append(`education_doc_${n}`,a.files[0]);const i=t.querySelector(`[name="education_remove_${n}"]`);i&&e.append(i.name,i.value)}),U.querySelectorAll(".certification-card").forEach(t=>{const n=t.dataset.entryId;e.append("certification_ids[]",n),e.append("cert_names[]",t.querySelector('[name="cert_name"]').value),e.append("cert_orgs[]",t.querySelector('[name="cert_org"]').value),e.append("cert_years[]",t.querySelector('[name="cert_year"]').value);const a=t.querySelector(`[name="certification_doc_${n}"]`);a?.files[0]&&e.append(`certification_doc_${n}`,a.files[0]);const i=t.querySelector(`[name="certification_remove_${n}"]`);i&&e.append(i.name,i.value)});const n=document.querySelector('[name="csrfmiddlewaretoken"]')?.value;n&&e.append("csrfmiddlewaretoken",n);const a=new XMLHttpRequest;return a.open("POST","/tutor/save-educations/",!0),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.show("Uploading Education Data"),new Promise((t,n)=>{a.upload.onprogress=e=>{l.updateProgress(e)},l.setupCancelButton(a),a.onload=async()=>{if(a.status>=200&&a.status<300)try{const e=JSON.parse(a.responseText);if(e.success){l.markSuccess("Upload completed! Finalizing..."),V();try{await ee(),e.warnings?.length&&e.warnings.forEach(e=>o(e,"warning")),setTimeout(()=>{l.hide()},1e3),t(e)}catch(n){console.error("Error loading data:",n),l.hide(),o("Data saved but there was an issue refreshing the page.","warning"),t(e)}}else l.markError(e.error||"Failed to save education data."),setTimeout(()=>{l.hide(),o(e.error||"Failed to save education data.","error")},2e3),n(new Error(e.error||"Failed to save education data"))}catch(e){l.markError("Invalid server response."),setTimeout(()=>{l.hide(),o("Invalid server response.","error")},2e3),n(new Error("Invalid server response"))}else l.markError(`Server error: ${a.status}`),setTimeout(()=>{l.hide(),o("Failed to save education data.","error")},2e3),n(new Error(`HTTP error: ${a.status}`))},a.onerror=()=>{l.markError("Network error during upload."),setTimeout(()=>{l.hide(),o("Network error during upload.","error")},2e3),n(new Error("Network error"))},a.onabort=()=>{l.hide(),o("Upload cancelled.","info"),n(new Error("Upload aborted"))},a.timeout=3e4,a.ontimeout=()=>{l.markError("Request timed out."),setTimeout(()=>{l.hide(),o("Request timed out.","error")},2e3),n(new Error("Timeout"))},a.send(e)})}catch(e){return l.hide(),console.error("Submission error:",e),o(e.message||"Failed to save education data. Please try again.","error"),{success:!1,error:e.message||"Failed to save education data"}}}();return e.success?(o("Your Education and Qualifications saved successfully.","success"),!0):(o(e.error||"Error saving education","error"),!1)}catch(e){return console.error("Error saving education:",e),o("Error saving education","error"),!1}}();case 5:return async function(){if(!(ce?pe.length>0||fe.length>0||(o("Please set your availability for at least one day.","warning"),0):(o("Please select your timezone first.","error"),le.focus(),0)))return!1;try{const e=await async function(){const e={timezone:ce,available_sessions:pe,DeletableTimeSlots:ge};try{const t="/schedule/save-available-rule-times/",n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":ke("csrftoken")},body:JSON.stringify(e)}),a=await n.json();if(!n.ok)throw new Error(a.message||"Failed to save availability");return"success"===a.status?(pe=[],ge=[],he=0,{success:!0}):{success:!1,error:a.message||"Error saving availability"}}catch(e){return console.error("Error:",e),{success:!1,error:"Error saving availability. Please try again."}}}();return e.success?(o("Your available times saved successfully.","success"),Ze.add(5),it(),!0):(o(e.error||"Error saving availabilities","error"),!1)}catch(e){return console.error("Error saving availabilities:",e),o("Error saving availabilities","error"),!1}}();case 6:return console.log("save pricing!"),async function(e){e||(e=Le.value);try{const t=await fetch("/tutor/update-pricing/",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRFToken":Ye("csrftoken")},body:JSON.stringify({cost_hourly:e})}),n=await t.json();return"success"===n.status?(o("Your Hourly Price saved successfully!","success"),!0):(o("Error updating price: "+n.message,"error"),!1)}catch(e){return console.error("Error in updatePricing:",e),o("Network error while updating price","error"),!1}}(),location.reload(),!0;case 7:return!0;default:return console.error("Unknown step:",e),!1}}function nt(e){return e<1||e>11?(console.warn(`Invalid navigation to step ${e}`),!1):(Qe=e,Ze.add(Qe-1),it(),at(Qe-1),ot(),rt(Qe),!0)}function at(e){document.querySelectorAll(".step").forEach((t,n)=>{n===e?t.classList.add("active"):t.classList.remove("active")})}function it(){document.querySelectorAll(".step").forEach((e,t)=>{const n=t+1,a=e.querySelector(".bs-stepper-circle");Ze.has(n)?(a.classList.add("completed-step","bg-success","text-white","d-flex","justify-content-center","align-items-center"),a.innerHTML='<i class="bi bi-check" style="font-size: 2rem;"></i>'):(a.classList.remove("completed-step","bg-success","text-white","d-flex","justify-content-center","align-items-center"),a.innerHTML=n)})}function ot(){document.querySelectorAll(".bs-stepper-content .content").forEach(e=>{e.classList.remove("active","show","d-block"),e.style.display="none"})}function rt(e){const t=document.querySelector(`#step-${e}`);t&&(t.classList.add("active","show","d-block"),t.style.display="block")}function st(){document.querySelectorAll(".is-invalid").forEach(e=>{e.classList.remove("is-invalid")}),document.querySelectorAll(".invalid-feedback").forEach(e=>{e.remove()})}function lt(e,t){const n=document.querySelector(`[name="${e}"]`);if(n){n.classList.add("is-invalid");const e=document.createElement("div");e.className="invalid-feedback",e.textContent=Array.isArray(t)?t[0]:t,n.parentNode.appendChild(e)}}document.addEventListener("DOMContentLoaded",function(){M(),A(),window.updateStepVisuals=it,document.addEventListener("click",function(e){const t=e.target.closest("[data-step]");if(!t)return;const n=parseInt(t.getAttribute("data-step")),a=t.getAttribute("data-action");switch(e.preventDefault(),a){case"prev":nt(n-1);break;case"skip":et(n),nt(n+1);break;case"save":tt(n);break;case"next":tt(n).then(e=>{e&&nt(n+1)}).catch(e=>{console.error("Error:",e)});break;case"submit":nt(n+1)}}),function(){let e=parseInt(document.getElementById("currentStep")?.value||"1",10)-1;9!==e&&10!==e||(e=7,Ze.add(6),it()),ot();for(let t=1;t<=e;t++)Ze.add(t);nt(e+1),at(e),it()}(),document.querySelectorAll(".step-trigger").forEach(e=>{e.style.pointerEvents="none",e.style.cursor="default",e.setAttribute("tabindex","-1"),e.setAttribute("aria-disabled","true")})})},803:(e,t,n)=>{n.d(t,{Q:()=>validatePhoneNumber});const countries=[{code:"af",name:"Afghanistan",dial:"+93"},{code:"al",name:"Albania",dial:"+355"},{code:"dz",name:"Algeria",dial:"+213"},{code:"as",name:"American Samoa",dial:"+1684"},{code:"ad",name:"Andorra",dial:"+376"},{code:"ao",name:"Angola",dial:"+244"},{code:"ai",name:"Anguilla",dial:"+1264"},{code:"ag",name:"Antigua and Barbuda",dial:"+1268"},{code:"ar",name:"Argentina",dial:"+54"},{code:"am",name:"Armenia",dial:"+374"},{code:"aw",name:"Aruba",dial:"+297"},{code:"au",name:"Australia",dial:"+61"},{code:"at",name:"Austria",dial:"+43"},{code:"az",name:"Azerbaijan",dial:"+994"},{code:"bs",name:"Bahamas",dial:"+1242"},{code:"bh",name:"Bahrain",dial:"+973"},{code:"bd",name:"Bangladesh",dial:"+880"},{code:"bb",name:"Barbados",dial:"+1246"},{code:"by",name:"Belarus",dial:"+375"},{code:"be",name:"Belgium",dial:"+32"},{code:"bz",name:"Belize",dial:"+501"},{code:"bj",name:"Benin",dial:"+229"},{code:"bm",name:"Bermuda",dial:"+1441"},{code:"bt",name:"Bhutan",dial:"+975"},{code:"bo",name:"Bolivia",dial:"+591"},{code:"ba",name:"Bosnia and Herzegovina",dial:"+387"},{code:"bw",name:"Botswana",dial:"+267"},{code:"br",name:"Brazil",dial:"+55"},{code:"io",name:"British Indian Ocean Territory",dial:"+246"},{code:"vg",name:"British Virgin Islands",dial:"+1284"},{code:"bn",name:"Brunei",dial:"+673"},{code:"bg",name:"Bulgaria",dial:"+359"},{code:"bf",name:"Burkina Faso",dial:"+226"},{code:"bi",name:"Burundi",dial:"+257"},{code:"kh",name:"Cambodia",dial:"+855"},{code:"cm",name:"Cameroon",dial:"+237"},{code:"ca",name:"Canada",dial:"+1"},{code:"cv",name:"Cape Verde",dial:"+238"},{code:"ky",name:"Cayman Islands",dial:"+1345"},{code:"cf",name:"Central African Republic",dial:"+236"},{code:"td",name:"Chad",dial:"+235"},{code:"cl",name:"Chile",dial:"+56"},{code:"cn",name:"China",dial:"+86"},{code:"cx",name:"Christmas Island",dial:"+61"},{code:"cc",name:"Cocos Islands",dial:"+61"},{code:"co",name:"Colombia",dial:"+57"},{code:"km",name:"Comoros",dial:"+269"},{code:"ck",name:"Cook Islands",dial:"+682"},{code:"cr",name:"Costa Rica",dial:"+506"},{code:"hr",name:"Croatia",dial:"+385"},{code:"cu",name:"Cuba",dial:"+53"},{code:"cw",name:"Curacao",dial:"+599"},{code:"cy",name:"Cyprus",dial:"+357"},{code:"cz",name:"Czech Republic",dial:"+420"},{code:"cd",name:"Democratic Republic of the Congo",dial:"+243"},{code:"dk",name:"Denmark",dial:"+45"},{code:"dj",name:"Djibouti",dial:"+253"},{code:"dm",name:"Dominica",dial:"+1767"},{code:"do",name:"Dominican Republic",dial:"+1809"},{code:"tl",name:"East Timor",dial:"+670"},{code:"ec",name:"Ecuador",dial:"+593"},{code:"eg",name:"Egypt",dial:"+20"},{code:"sv",name:"El Salvador",dial:"+503"},{code:"gq",name:"Equatorial Guinea",dial:"+240"},{code:"er",name:"Eritrea",dial:"+291"},{code:"ee",name:"Estonia",dial:"+372"},{code:"et",name:"Ethiopia",dial:"+251"},{code:"fk",name:"Falkland Islands",dial:"+500"},{code:"fo",name:"Faroe Islands",dial:"+298"},{code:"fj",name:"Fiji",dial:"+679"},{code:"fi",name:"Finland",dial:"+358"},{code:"fr",name:"France",dial:"+33"},{code:"pf",name:"French Polynesia",dial:"+689"},{code:"ga",name:"Gabon",dial:"+241"},{code:"gm",name:"Gambia",dial:"+220"},{code:"ge",name:"Georgia",dial:"+995"},{code:"de",name:"Germany",dial:"+49"},{code:"gh",name:"Ghana",dial:"+233"},{code:"gi",name:"Gibraltar",dial:"+350"},{code:"gr",name:"Greece",dial:"+30"},{code:"gl",name:"Greenland",dial:"+299"},{code:"gd",name:"Grenada",dial:"+1473"},{code:"gu",name:"Guam",dial:"+1671"},{code:"gt",name:"Guatemala",dial:"+502"},{code:"gg",name:"Guernsey",dial:"+441481"},{code:"gn",name:"Guinea",dial:"+224"},{code:"gw",name:"Guinea-Bissau",dial:"+245"},{code:"gy",name:"Guyana",dial:"+592"},{code:"ht",name:"Haiti",dial:"+509"},{code:"hn",name:"Honduras",dial:"+504"},{code:"hk",name:"Hong Kong",dial:"+852"},{code:"hu",name:"Hungary",dial:"+36"},{code:"is",name:"Iceland",dial:"+354"},{code:"in",name:"India",dial:"+91"},{code:"id",name:"Indonesia",dial:"+62"},{code:"ir",name:"Iran",dial:"+98"},{code:"iq",name:"Iraq",dial:"+964"},{code:"ie",name:"Ireland",dial:"+353"},{code:"im",name:"Isle of Man",dial:"+441624"},{code:"il",name:"Israel",dial:"+972"},{code:"it",name:"Italy",dial:"+39"},{code:"ci",name:"Ivory Coast",dial:"+225"},{code:"jm",name:"Jamaica",dial:"+1876"},{code:"jp",name:"Japan",dial:"+81"},{code:"je",name:"Jersey",dial:"+441534"},{code:"jo",name:"Jordan",dial:"+962"},{code:"kz",name:"Kazakhstan",dial:"+7"},{code:"ke",name:"Kenya",dial:"+254"},{code:"ki",name:"Kiribati",dial:"+686"},{code:"xk",name:"Kosovo",dial:"+383"},{code:"kw",name:"Kuwait",dial:"+965"},{code:"kg",name:"Kyrgyzstan",dial:"+996"},{code:"la",name:"Laos",dial:"+856"},{code:"lv",name:"Latvia",dial:"+371"},{code:"lb",name:"Lebanon",dial:"+961"},{code:"ls",name:"Lesotho",dial:"+266"},{code:"lr",name:"Liberia",dial:"+231"},{code:"ly",name:"Libya",dial:"+218"},{code:"li",name:"Liechtenstein",dial:"+423"},{code:"lt",name:"Lithuania",dial:"+370"},{code:"lu",name:"Luxembourg",dial:"+352"},{code:"mo",name:"Macau",dial:"+853"},{code:"mk",name:"North Macedonia",dial:"+389"},{code:"mg",name:"Madagascar",dial:"+261"},{code:"mw",name:"Malawi",dial:"+265"},{code:"my",name:"Malaysia",dial:"+60"},{code:"mv",name:"Maldives",dial:"+960"},{code:"ml",name:"Mali",dial:"+223"},{code:"mt",name:"Malta",dial:"+356"},{code:"mh",name:"Marshall Islands",dial:"+692"},{code:"mr",name:"Mauritania",dial:"+222"},{code:"mu",name:"Mauritius",dial:"+230"},{code:"yt",name:"Mayotte",dial:"+262"},{code:"mx",name:"Mexico",dial:"+52"},{code:"fm",name:"Micronesia",dial:"+691"},{code:"md",name:"Moldova",dial:"+373"},{code:"mc",name:"Monaco",dial:"+377"},{code:"mn",name:"Mongolia",dial:"+976"},{code:"me",name:"Montenegro",dial:"+382"},{code:"ms",name:"Montserrat",dial:"+1664"},{code:"ma",name:"Morocco",dial:"+212"},{code:"mz",name:"Mozambique",dial:"+258"},{code:"mm",name:"Myanmar",dial:"+95"},{code:"na",name:"Namibia",dial:"+264"},{code:"nr",name:"Nauru",dial:"+674"},{code:"np",name:"Nepal",dial:"+977"},{code:"nl",name:"Netherlands",dial:"+31"},{code:"nc",name:"New Caledonia",dial:"+687"},{code:"nz",name:"New Zealand",dial:"+64"},{code:"ni",name:"Nicaragua",dial:"+505"},{code:"ne",name:"Niger",dial:"+227"},{code:"ng",name:"Nigeria",dial:"+234"},{code:"nu",name:"Niue",dial:"+683"},{code:"kp",name:"North Korea",dial:"+850"},{code:"mp",name:"Northern Mariana Islands",dial:"+1670"},{code:"no",name:"Norway",dial:"+47"},{code:"om",name:"Oman",dial:"+968"},{code:"pk",name:"Pakistan",dial:"+92"},{code:"pw",name:"Palau",dial:"+680"},{code:"ps",name:"Palestine",dial:"+970"},{code:"pa",name:"Panama",dial:"+507"},{code:"pg",name:"Papua New Guinea",dial:"+675"},{code:"py",name:"Paraguay",dial:"+595"},{code:"pe",name:"Peru",dial:"+51"},{code:"ph",name:"Philippines",dial:"+63"},{code:"pn",name:"Pitcairn",dial:"+64"},{code:"pl",name:"Poland",dial:"+48"},{code:"pt",name:"Portugal",dial:"+351"},{code:"pr",name:"Puerto Rico",dial:"+1787"},{code:"qa",name:"Qatar",dial:"+974"},{code:"cg",name:"Republic of the Congo",dial:"+242"},{code:"re",name:"Reunion",dial:"+262"},{code:"ro",name:"Romania",dial:"+40"},{code:"ru",name:"Russia",dial:"+7"},{code:"rw",name:"Rwanda",dial:"+250"},{code:"bl",name:"Saint Barthelemy",dial:"+590"},{code:"sh",name:"Saint Helena",dial:"+290"},{code:"kn",name:"Saint Kitts and Nevis",dial:"+1869"},{code:"lc",name:"Saint Lucia",dial:"+1758"},{code:"mf",name:"Saint Martin",dial:"+590"},{code:"pm",name:"Saint Pierre and Miquelon",dial:"+508"},{code:"vc",name:"Saint Vincent and the Grenadines",dial:"+1784"},{code:"ws",name:"Samoa",dial:"+685"},{code:"sm",name:"San Marino",dial:"+378"},{code:"st",name:"Sao Tome and Principe",dial:"+239"},{code:"sa",name:"Saudi Arabia",dial:"+966"},{code:"sn",name:"Senegal",dial:"+221"},{code:"rs",name:"Serbia",dial:"+381"},{code:"sc",name:"Seychelles",dial:"+248"},{code:"sl",name:"Sierra Leone",dial:"+232"},{code:"sg",name:"Singapore",dial:"+65"},{code:"sx",name:"Sint Maarten",dial:"+1721"},{code:"sk",name:"Slovakia",dial:"+421"},{code:"si",name:"Slovenia",dial:"+386"},{code:"sb",name:"Solomon Islands",dial:"+677"},{code:"so",name:"Somalia",dial:"+252"},{code:"za",name:"South Africa",dial:"+27"},{code:"kr",name:"South Korea",dial:"+82"},{code:"ss",name:"South Sudan",dial:"+211"},{code:"es",name:"Spain",dial:"+34"},{code:"lk",name:"Sri Lanka",dial:"+94"},{code:"sd",name:"Sudan",dial:"+249"},{code:"sr",name:"Suriname",dial:"+597"},{code:"sj",name:"Svalbard and Jan Mayen",dial:"+47"},{code:"sz",name:"Swaziland",dial:"+268"},{code:"se",name:"Sweden",dial:"+46"},{code:"ch",name:"Switzerland",dial:"+41"},{code:"sy",name:"Syria",dial:"+963"},{code:"tw",name:"Taiwan",dial:"+886"},{code:"tj",name:"Tajikistan",dial:"+992"},{code:"tz",name:"Tanzania",dial:"+255"},{code:"th",name:"Thailand",dial:"+66"},{code:"tg",name:"Togo",dial:"+228"},{code:"tk",name:"Tokelau",dial:"+690"},{code:"to",name:"Tonga",dial:"+676"},{code:"tt",name:"Trinidad and Tobago",dial:"+1868"},{code:"tn",name:"Tunisia",dial:"+216"},{code:"tr",name:"Turkey",dial:"+90"},{code:"tm",name:"Turkmenistan",dial:"+993"},{code:"tc",name:"Turks and Caicos Islands",dial:"+1649"},{code:"tv",name:"Tuvalu",dial:"+688"},{code:"vi",name:"U.S. Virgin Islands",dial:"+1340"},{code:"ug",name:"Uganda",dial:"+256"},{code:"ua",name:"Ukraine",dial:"+380"},{code:"ae",name:"United Arab Emirates",dial:"+971"},{code:"gb",name:"United Kingdom",dial:"+44"},{code:"us",name:"United States",dial:"+1"},{code:"uy",name:"Uruguay",dial:"+598"},{code:"uz",name:"Uzbekistan",dial:"+998"},{code:"vu",name:"Vanuatu",dial:"+678"},{code:"va",name:"Vatican",dial:"+379"},{code:"ve",name:"Venezuela",dial:"+58"},{code:"vn",name:"Vietnam",dial:"+84"},{code:"wf",name:"Wallis and Futuna",dial:"+681"},{code:"eh",name:"Western Sahara",dial:"+212"},{code:"ye",name:"Yemen",dial:"+967"},{code:"zm",name:"Zambia",dial:"+260"},{code:"zw",name:"Zimbabwe",dial:"+263"}],a=document.getElementById("countrySelector"),i=document.getElementById("countryDropdown"),o=document.getElementById("countrySearch"),r=document.getElementById("countryList"),s=document.getElementById("selectedFlag"),l=document.getElementById("selectedCountryCode"),d=document.querySelector('[name="phone_display"]'),c=document.querySelector('[name="phone_country_code"]'),u=document.querySelector('[name="phone_number"]'),m=document.getElementById("phoneInputWrapper")||document.querySelector(".input-group.border.rounded"),p=(document.getElementById("validationMessage"),document.getElementById("fullPhoneNumber"),document.getElementById("profileForm"));let h=countries[0],f=-1;const g=function(){const e=document.createElement("div");e.style.position="absolute",e.style.visibility="hidden",e.style.whiteSpace="nowrap",e.style.fontSize="14px",e.style.padding="8px 12px",document.body.appendChild(e);let t=0;countries.forEach(n=>{e.textContent=n.name;const a=e.offsetWidth;a>t&&(t=a)});let n=0;return countries.forEach(t=>{e.textContent=t.dial;const a=e.offsetWidth;a>n&&(n=a)}),document.body.removeChild(e),32+t+n+24}();function y(e=""){r.innerHTML="";countries.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())||t.dial.includes(e)).forEach((e,t)=>{const n=document.createElement("li");n.className="country-item",n.innerHTML=`\n          <span class="fi fi-${e.code}"></span>\n          <span class="country-name">${e.name}</span>\n          <span class="country-dial">${e.dial}</span>\n        `,n.addEventListener("click",()=>{selectCountry(e),E()}),n.addEventListener("mouseover",()=>{b(t)}),r.appendChild(n)}),f=-1}function b(e){const t=r.querySelectorAll(".country-item");t.forEach(e=>{e.classList.remove("highlighted")}),e>=0&&e<t.length&&(t[e].classList.add("highlighted"),t[e].scrollIntoView({block:"nearest"}),f=e)}function v(){const e=a.offsetWidth;i.style.width=`${e}px`}function E(){i.style.display="none",f=-1}function validatePhoneNumber(){const e=d.value.replace(/\D/g,""),t=e.length>=8&&e.length<=15;return e&&!t?(m.classList.add("is-invalid"),k("Phone number must be 8-15 digits"),!1):(m.classList.remove("is-invalid"),function(){const e=document.getElementById("phoneError");e&&(e.style.display="none")}(),!0)}function k(e){const t=document.getElementById("phoneError");t&&(t.textContent=e,t.style.display="block")}function selectCountry(e){h=e,s.className=`fi fi-${e.code}`,l.textContent=e.dial,c.value=e.dial,d.focus(),validatePhoneNumber()}i.style.width=`${Math.min(g,300)}px`,v(),window.addEventListener("resize",v),a.addEventListener("click",function(){"block"===i.style.display?E():(v(),i.style.display="block",o.focus(),y())}),document.addEventListener("click",e=>{a.contains(e.target)||i.contains(e.target)||E()}),o.addEventListener("input",e=>{y(e.target.value)}),d.addEventListener("input",e=>{let t=e.target.value.replace(/\D/g,"");t=t.substring(0,15),e.target.value=t,validatePhoneNumber()}),d.addEventListener("keydown",e=>{[46,8,9,27,13].includes(e.keyCode)||65===e.keyCode&&!0===e.ctrlKey||67===e.keyCode&&!0===e.ctrlKey||86===e.keyCode&&!0===e.ctrlKey||88===e.keyCode&&!0===e.ctrlKey||e.keyCode>=35&&e.keyCode<=39||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()}),document.addEventListener("keydown",function(e){if("block"!==i.style.display)return;const t=r.querySelectorAll(".country-item");if(0!==t.length)switch(e.key){case"ArrowDown":e.preventDefault(),b((f+1)%t.length);break;case"ArrowUp":e.preventDefault(),b((f-1+t.length)%t.length);break;case"Enter":if(f>=0){e.preventDefault();const n=countries.find(e=>e.name===t[f].querySelector("span:nth-child(2)").textContent);n&&(selectCountry(n),E())}break;case"Escape":E()}}),y(),d.addEventListener("input",function(e){validatePhoneNumber()}),p.addEventListener("submit",function(e){const t=d.value.replace(/\D/g,"");return u.value=t,d.value=t,!!validatePhoneNumber()||(e.preventDefault(),k("Please correct the phone number (8-15 digits)"),!1)}),document.addEventListener("DOMContentLoaded",function(){const e=c?c.value:"+1",t=u?u.value:"";selectCountry(countries.find(t=>t.dial===e)||countries[0]),d&&t&&(d.value=t)})}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n(803);n(300)})();