<!-- Enterprise Filter Design -->
<form id="fSearch" class="bg-white border border-gray-200 rounded-xl shadow-sm p-6 mb-6 position-relative"
      action="{% url 'provider:tutor_list' %}" method="GET">

    <!-- Main Filter Row -->
    <div class="row g-3 align-items-end">

        <!-- Skills Filter -->
        <div class="col-xl-2 col-lg-3 col-md-4 col-sm-6">
            <label class="form-label small fw-semibold text-gray-600 mb-2">Teaching Skills</label>
            <select name="skills" class="form-select form-select-md border-gray-300 focus:border-blue-500 focus:ring-blue-500"
                    aria-label="Teaching Skills">
                <option value="">All Skills</option>
                {% for skill in s_skills %}
                    <option value="{{ skill }}" {% if request.GET.skills == skill %}selected{% endif %}>
                        {{ skill }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <!-- Skill Level Filter -->
        <div class="col-xl-2 col-lg-3 col-md-4 col-sm-6">
            <label class="form-label small fw-semibold text-gray-600 mb-2">Skill Level</label>
            <select name="sSkillLevel" class="form-select form-select-md border-gray-300 focus:border-blue-500 focus:ring-blue-500"
                    aria-label="Skill Level">
                <option value="">All Levels</option>
                {% for level in s_language_levels %}
                    <option value="{{ level.name }}" {% if request.GET.sSkillLevel == level.name %}selected{% endif %}>
                        {{ level.name|capfirst }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <!-- Price Range Dropdown -->
        <div class="col-xl-2 col-lg-3 col-md-4 col-sm-6">
            <label class="form-label small fw-semibold text-gray-600 mb-2">Hourly Price</label>
            <div class="dropdown">
                <button class="btn btn-outline-gray-400 btn-md w-100 dropdown-toggle d-flex justify-content-between align-items-center"
                        type="button"
                        data-bs-toggle="dropdown"
                        aria-expanded="false"
                        data-bs-auto-close="outside"
                        id="priceRangeDropdown">
                    <span class="text-truncate">
                        {% if request.GET.min_price and request.GET.max_price %}
                            ${{ request.GET.min_price }} - ${{ request.GET.max_price }}
                        {% else %}
                            Price Range
                        {% endif %}
                    </span>
                </button>

                <div class="dropdown-menu p-4 shadow-lg border-0" style="min-width: 360px;">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h6 class="mb-0 fw-semibold text-gray-800">Hourly Price Range</h6>
                        <button type="button" class="btn-close" data-bs-dismiss="dropdown" aria-label="Close"></button>
                    </div>

                    <!-- noUiSlider Container -->
                    <div id="priceSlider" class="mb-4 mt-3"></div>

                    <!-- Price Inputs -->
                    <div class="row g-3 mb-4">
                        <div class="col-6">
                            <label class="form-label small fw-semibold text-gray-600">Minimum</label>
                            <div class="input-group input-group-md">
                                <span class="input-group-text bg-gray-50 border-gray-300 text-gray-600">$</span>
                                <input type="number" class="form-control border-gray-300 focus:border-blue-500"
                                       id="minPriceEdit" min="{{ min_price }}" max="{{ max_price }}"
                                       value="{{ request.GET.min_price|default:min_price }}">
                            </div>
                        </div>
                        <div class="col-6">
                            <label class="form-label small fw-semibold text-gray-600">Maximum</label>
                            <div class="input-group input-group-md">
                                <span class="input-group-text bg-gray-50 border-gray-300 text-gray-600">$</span>
                                <input type="number" class="form-control border-gray-300 focus:border-blue-500"
                                       id="maxPriceEdit" min="{{ min_price }}" max="{{ max_price }}"
                                       value="{{ request.GET.max_price|default:max_price }}">
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="d-flex justify-content-between gap-2">
                        <button type="button" class="btn btn-outline-gray-500 btn-sm flex-fill"
                                onclick="resetPriceRange()">
                            <i class="fas fa-redo me-2"></i>Reset
                        </button>
                        <button type="button" class="btn btn-primary btn-sm flex-fill"
                                onclick="applyPriceRange()">
                            <i class="fas fa-check me-2"></i>Apply
                        </button>
                    </div>

                    <input type="hidden" name="min_price" id="minPriceInput" value="{{ request.GET.min_price|default:min_price }}">
                    <input type="hidden" name="max_price" id="maxPriceInput" value="{{ request.GET.max_price|default:max_price }}">
                </div>
            </div>
        </div>

        <!-- Gender Filter -->
        <div class="col-xl-2 col-lg-3 col-md-4 col-sm-6">
            <label class="form-label small fw-semibold text-gray-600 mb-2">Gender</label>
            <select id="gender" name="gender" class="form-select form-select-md border-gray-300 focus:border-blue-500 focus:ring-blue-500"
                    aria-label="Gender">
                <option value="">All Genders</option>
                {% for gender in s_gender %}
                    <option value="{{ gender }}" {% if request.GET.gender == gender %}selected{% endif %}>
                        {{ gender|capfirst }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <!-- Rating Filter -->
        <div class="col-xl-2 col-lg-3 col-md-4 col-sm-6">
            <label class="form-label small fw-semibold text-gray-600 mb-2">Minimum Rating</label>
            <select id="sRate" name="sRate" class="form-select form-select-md border-gray-300 focus:border-blue-500 focus:ring-blue-500"
                    aria-label="Rating">
                <option value="">Any Rating</option>
                <option value="5" {% if request.GET.sRate == "5" %}selected{% endif %}>
                    <span class="text-warning">★★★★★</span> 5 Stars
                </option>
                <option value="4" {% if request.GET.sRate == "4" %}selected{% endif %}>
                    <span class="text-warning">★★★★</span> & up
                </option>
                <option value="3" {% if request.GET.sRate == "3" %}selected{% endif %}>
                    <span class="text-warning">★★★</span> & up
                </option>
                <option value="2" {% if request.GET.sRate == "2" %}selected{% endif %}>
                    <span class="text-warning">★★</span> & up
                </option>
                <option value="1" {% if request.GET.sRate == "1" %}selected{% endif %}>
                    <span class="text-warning">★</span> & up
                </option>
            </select>
        </div>

        <!-- Search Input -->
        <div class="col-xl-2 col-lg-3 col-md-4 col-sm-6">
            <label class="form-label small fw-semibold text-gray-600 mb-2">Search Tutors</label>
            <div class="input-group input-group-md">
                <span class="input-group-text bg-gray-50 border-gray-300 text-gray-600">
                    <i class="fas fa-search"></i>
                </span>
                <input class="form-control border-gray-300 focus:border-blue-500"
                       type="search" name="keySearch" placeholder="Name or keyword..."
                       value="{{ request.GET.keySearch }}">
            </div>
        </div>

        <!-- Search Button -->
        <div class="col-xl-auto col-lg-auto col-md-4 col-sm-6">
            <button type="submit" class="btn btn-primary btn-md w-100 h-100 d-flex align-items-center justify-content-center">
                <i class="fas fa-search me-2"></i>
                <span class="d-none d-sm-inline">Search</span>
            </button>
        </div>

    </div>

    <!-- Active Filters Display -->
    <div class="row mt-4" id="activeFiltersContainer" style="display: none;">
        <div class="col-12">
            <div class="d-flex flex-wrap gap-2 align-items-center">
                <span class="text-gray-600 fw-semibold small me-2">Active filters:</span>
                <!-- Active filters will appear here -->
            </div>
        </div>
    </div>

</form>
