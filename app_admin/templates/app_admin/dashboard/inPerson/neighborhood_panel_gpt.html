{% extends 'app_admin/dashboard/da_base.html' %}
{% block admin_main_content %}

    <h2>Neighborhood Finder</h2>
    <div class="row">
        <div class="col-md-6">
            <h4>Students</h4>
            <table class="table table-striped table-hover">
                <thead>
                <tr>
                    <th>Name</th>
                    <th>City</th>
                    <th>Country</th>
                    <th>Method</th>
                    <th>Action</th>
                </tr>
                </thead>
                <tbody>
                {% for student in students %}
                    <tr>
                        <td>{{ student.user.username }}</td>
                        <td>{{ student.city }}</td>
                        <td>{{ student.country }}</td>
                        <td>{{ student.get_meeting_method_display }}</td>
                        <td><a href="?user_id={{ student.id }}" class="btn btn-primary btn-sm">View Tutors Nearby</a>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="col-md-6">
            <h4>Tutors</h4>
            <table class="table table-striped table-hover">
                <thead>
                <tr>
                    <th>Name</th>
                    <th>City</th>
                    <th>Country</th>
                    <th>Method</th>
                    <th>Action</th>
                </tr>
                </thead>
                <tbody>
                {% for tutor in tutors %}
                    <tr>
                        <td>{{ tutor.user.username }}</td>
                        <td>{{ tutor.city }}</td>
                        <td>{{ tutor.country }}</td>
                        <td>{{ tutor.get_meeting_method_display }}</td>
                        <td><a href="?user_id={{ tutor.id }}" class="btn btn-success btn-sm">View Students Nearby</a>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    {% if selected_user %}
        <hr>
        <h3>Matches for {{ selected_user.user.username }} ({{ selected_user.user_type }})</h3>
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>Name</th>
                <th>City</th>
                <th>Distance (km)</th>
            </tr>
            </thead>
            <tbody>
            {% for m in matches %}
                <tr>
                    <td>{{ m.user.username }}</td>
                    <td>{{ m.city }}</td>
{#                    <td>{{ m.distance|floatformat:1 }}</td>#}
                </tr>
            {% empty %}
                <tr>
                    <td colspan="3">No matches found.</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    {% endif %}

{% endblock %}
